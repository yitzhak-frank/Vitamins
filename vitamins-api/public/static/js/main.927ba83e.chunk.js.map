{"version":3,"sources":["components/Home.jsx","services/usersService.js","services/http.js","services/cartService.js","redux-store/cart-reducer.js","redux-store/indexes-reduser.js","redux-store/products-reducer.js","services/productsService.js","redux-store/redux-store.js","components/cart/cartItem.jsx","components/products/prodDetails.jsx","services/generalFn.js","components/cart/cart.jsx","components/footer.jsx","components/navBar.jsx","components/common/input.jsx","components/signin.jsx","components/admin/pagination.jsx","hooks/scrollPosition.js","services/adminService.js","components/admin/usersTable/addAndEditUser.jsx","components/admin/usersTable/userRow.jsx","components/admin/usersTable/usersTable.jsx","components/admin/adminNavBar.jsx","hooks/screenSize.js","components/admin/productsTable/productRow.jsx","components/admin/productsTable/addAndEditProd.jsx","components/admin/productsTable/productsTable.jsx","components/admin/adminApp.jsx","components/products/product.jsx","components/products/products.jsx","redux-store/index.redux.js","components/protectedRoute.jsx","components/signup.jsx","App.js","reportWebVitals.js","index.js"],"names":["Home","TOKEN_KEY","ROLE","NAME","getJwt","localStorage","getItem","getCurrentUser","name","role","checkAdminToken","a","http","get","apiUrl","checkIfAdmin","userSignUp","user","post","then","resp","data","login","email","pass","setItem","token","saveCartToDbOnLogin","window","location","reload","axios","defaults","headers","common","interceptors","response","use","err","status","toast","error","message","Promise","reject","requests","put","patch","delete","addToCart","prod","changeItemAmount","removeFromCart","prod_id","cart","store","getState","items","length","forEach","dispatch","editCart","ADD_TO_CART","GET_CART","EDIT_CART","CHANGE_AMOUNT","REMOVE_FROM_CART","SELECT","SELECT_ALL","UNSELECT_ALL","REMOVE_SELECTED","initCartState","loading","selectedItems","cartReducer","state","action","type","payload","map","filter","prodId","getCart","getAction","selectHandler","selectAllHandler","CART_INDEX","LOGIN_INDEX","USER_INDEX","ADMIN_INDEX","SIGNUP_DATA","initIndexesState","admin","signupData","indexesRrducer","indexesManager","GET_PRODS","initProdsState","prods","prodsReducer","getProducts","createStore","combineReducers","products","indexes","applyMiddleware","thunkMiddleware","CartItem","item","image","price","payment","amount","_id","fn","handelChangeAmount","handelRemoveFromCart","handleSelectItem","showProd","style","className","onClick","e","src","alt","prodid","toString","replace","ProdDetails","dscription","more_info","hideProd","handleAddToCart","useState","setAmount","changeAmount","pointer","background","checkParentsClass","element","classname","split","includes","parentNode","getDateFormated","date","month","Date","getMonth","day","getDate","getFullYear","connect","_cart","_selectedItems","setCart","setProducts","cartProds","setCartProds","setSelectedItems","setProd","history","useHistory","styles","selectedItem","backgroundColor","border","notSelectedItem","emptyCart","fontSize","margin","display","color","textShadow","emptyCartText","useEffect","subscribe","setCartProdsData","reverse","findIndex","updateCart","msg","toastMessages","target","pathname","attributes","nodeValue","id","finalPayment","calcFinalPayment","disabled","to","isProdInCart","Footer","cartItems","url","setUrl","listen","Input","inputData","field","placeholder","inputsFocus","inputFn","formik","setInputsFocus","noValidate","value","values","onChange","handleChange","onFocus","inputs","onBlur","handleBlur","touched","errors","onSubmit","password","console","dir","useFormik","initialValues","validate","test","removeItem","handleSubmit","Pagination","pagesCount","currentPage","setCurrentPage","page","useScrollPositionBottom","scrollY","scrollPosition","setScrollPosition","pageHeight","document","body","clientHeight","screenHeight","documentElement","handleScroll","addEventListener","removeEventListener","getTableData","table","sortBy","orderBy","skip","limit","searchItems","searchValue","getSearchCount","getCount","addItem","uploadProdImg","img","editItem","itemId","deleteItem","AddAndEditUser","closeForm","reRender","formContainer","width","height","form","maxWidth","maxHeight","overflowY","val","htmlFor","UserRow","setUserToEdit","handleDeleteUser","index","date_created","UsersTable","users","tableData","addItemIndex","userToEdit","itemToEdit","handleDeleteItem","handleCloseForm","setAddItemIndex","setItemToEdit","scrollPositionBottom","addBtn","bottom","AdminNavBar","currentTable","setSortBy","setOrderBy","showAll","showPages","getWindowSize","innerWidth","innerHeight","useWindowSize","windowSize","setWindowSize","handleResize","ProductRow","handleDeleteProd","setProdToEdit","description","divStyle","AddAndEditProd","prodImg","setProdImg","textarea","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","minHeight","transform","uploadImage","imgUrl","querySelector","files","FormData","append","input","fileReader","FileReader","onload","result","readAsDataURL","displayNewImage","for","class","ProductsTable","prodToEdit","AdminApp","setCurrentTable","setTableData","itemsCount","setItemsCount","setPagesCount","amontToShow","setAmontToShow","setReRender","setSearchValue","setLoading","showAllIndex","setShowAllIndex","count","pages","Math","ceil","i","push","confirm","paddingBottom","aria-hidden","aria-label","Product","filteredData","setFilteredData","search","toLowerCase","reduxIndex","indexesReducer","ProtectedRoute","Componenet","component","render","props","from","userInfo","user_id","catch","verifyPass","App","setIndexes","pageNotFound","position","path","exact","Products","SignUp","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"+zCAIeA,G,YAJF,WACT,OAAO,O,sECGLC,EAAY,QAASC,EAAO,OAAQC,EAAO,OAEpCC,EAAS,kBAAMC,aAAaC,QAAQL,IAEpCM,EAAiB,kBAAMF,aAAY,MAAe,CAAEG,KAAMH,aAAY,KAAQI,KAAMJ,aAAY,MAAW,MAE3GK,EAAe,uCAAG,sBAAAC,EAAA,+EAEjBC,EAAKC,IAAIC,IAAS,qBAFD,OAGvBT,aAAY,KAAS,QAHE,sDAILA,aAAY,KAJP,wDAAH,qDAOfU,EAAe,iBAA6B,UAAvBV,aAAY,MAEjCW,EAAa,SAACC,GAAD,OAAUL,EAAKM,KAAKJ,IAAS,gBAAiBG,GAAME,MAAK,SAAAC,GAAI,OAAIA,EAAKC,SAEnFC,EAAK,uCAAG,WAAMC,EAAOC,GAAb,iBAAAb,EAAA,sEACIC,EAAKM,KAAKJ,IAAS,eAAgB,CAAES,QAAOC,SADhD,gBACXH,EADW,EACXA,KACNhB,aAAaoB,QAAQxB,EAAWoB,EAAKK,OACrCrB,aAAaoB,QAAQtB,EAAMkB,EAAKb,MAChCH,aAAaoB,QAAQvB,EAAMmB,EAAKZ,MAChCkB,IACAC,OAAOC,SAASC,SANC,2CAAH,wDCjBlBC,IAAMC,SAASC,QAAQC,OAAO,gBAAkB9B,IAGhD2B,IAAMI,aAAaC,SAASC,IAAI,MAAM,SAAAC,GAIlC,OAHGA,EAAIF,UAAoC,MAAxBE,EAAIF,SAASG,OAAgBC,IAAMC,MAAM,yHACpDH,EAAIF,UAAYE,EAAIF,SAASG,QAAU,IAAKC,IAAMC,MAAM,yHACxDH,EAAIF,UAA0C,6BAA9BE,EAAIF,SAASf,KAAKqB,SAAwCF,IAAMC,MAAM,iLACvFE,QAAQC,OAAON,MAG1B,IAQeO,EARE,CACbhC,IAAQkB,IAAMlB,IACdK,KAAQa,IAAMb,KACd4B,IAAQf,IAAMe,IACdC,MAAQhB,IAAMgB,MACdC,OAAQjB,IAAMiB,QCVLC,EAAY,SAACC,GAAD,OAAUtC,EAAKkC,IAAIhC,IAAS,iBAAkBoC,IAE1DC,EAAmB,SAACD,GAAD,OAAUtC,EAAKkC,IAAIhC,IAAS,oBAAqBoC,IAEpEE,EAAiB,SAACC,GAAD,OAAazC,EAAKkC,IAAIhC,IAAS,oBAAqB,CAACuC,aAEtE1B,EAAsB,WAC/B,IAAI2B,EAAOC,GAAMC,WAAWF,KAAKA,KAAKG,MAClCH,EAAKI,SDZwB3B,IAAMC,SAASC,QAAQC,OAAO,gBAAkB9B,ICcjFkD,EAAKK,SAAQ,SAAAT,GAAI,OAAIK,GAAMK,SAASC,EAASC,EAAaZ,SCf1Da,EAAmB,WACnBC,EAAmB,YACnBF,EAAmB,cACnBG,EAAmB,gBACnBC,EAAmB,mBACnBC,EAAmB,SACnBC,EAAmB,aACnBC,EAAmB,eACnBC,EAAmB,kBAEjBC,EAAgB,CAACC,SAAS,EAAO/B,MAAO,GAAIa,KAAM,CAACG,MAAO,IAAKgB,cAAe,IAEvEC,EAAc,WAAoC,IAAnCC,EAAkC,uDAA1BJ,EAAeK,EAAW,uCAC1D,OAAOA,EAAOC,MACV,KAAKd,EACL,KAAKC,EAAW,OAAO,2BAAKW,GAAUC,EAAOE,SAC7C,KAAKhB,EAAa,OAAO,2BAAKa,GAAZ,IAAmBrB,KAAM,CAAEG,MAAM,GAAD,mBAAMkB,EAAMrB,KAAKG,OAAjB,CAAwBmB,EAAO1B,UACjF,KAAKe,EAAe,OAAO,2BAAIU,GAAX,IAAiBrB,KAAK,CAACG,MAAMkB,EAAMrB,KAAKG,MAAMsB,KAAI,SAAA7B,GAAI,OAAEA,EAAKG,UAAUuB,EAAO1B,KAAKG,QAAQuB,EAAO1B,KAAKA,QAC3H,KAAKgB,EAAkB,OAAO,2BAAKS,GAAZ,IAAmBrB,KAAM,CAACG,MAAOkB,EAAMrB,KAAKG,MAAMuB,QAAO,SAAA9B,GAAI,OAAIA,EAAKG,UAAYuB,EAAO1B,WAChH,KAAKiB,EAAQ,OAAO,2BAAKQ,GAAZ,IAAmBF,cAAc,GAAD,mBAAME,EAAMF,eAAZ,CAA2BG,EAAOK,WAC/E,KAAKb,EACL,KAAKC,EAAc,OAAO,2BAAKM,GAAZ,IAAmBF,cAAeG,EAAOH,gBAC5D,KAAKH,EAAiB,OAAO,2BAAKK,GAAZ,IAAmBF,cAAeE,EAAMF,cAAcO,QAAO,SAAA9B,GAAI,OAAIA,IAAS0B,EAAOK,YAC3G,QAAS,OAAON,IAIXO,EAAU,WACnB,IAAIJ,EAASD,EAAOd,EACpB,8CAAO,WAAOH,GAAP,eAAAjD,EAAA,6DAEHiD,EAAS,CAACiB,OAAMC,QADhBA,EAAU,CAACN,SAAS,EAAM/B,MAAO,MAD9B,kBD1BsB7B,EAAKC,IAAIC,IAAS,cAAcK,MAAK,SAAAC,GAAI,OAAIA,EAAKC,QC0BxE,OAIKiC,EAJL,OAMCM,EAAS,CAACiB,OAAMC,QADhBA,EAAU,CAACN,SAAS,EAAOlB,OAAMb,MAAO,MALzC,kDAQCqC,EAAU,CAACN,SAAS,EAAOlB,KAAM,GAAIb,MAAM,EAAD,IAC1CmB,EAAS,CAACiB,OAAMC,YATjB,0DAAP,uDAcSjB,EAAW,SAACgB,EAAM3B,GAC3B,IAAI4B,EACJ,OAAIvE,IACJ,uCAAO,WAAOqD,GAAP,SAAAjD,EAAA,6DAEHiD,EAAS,CAACiB,KAAMb,EAAWc,QAD3BA,EAAU,CAACN,SAAS,EAAM/B,MAAO,MAD9B,kBAIQ0C,EAAUN,EAAVM,CAAgBjC,GAJxB,OAKCU,EAAS,CAACiB,OAAM3B,SALjB,gDAOC4B,EAAU,CAACN,SAAS,EAAO/B,MAAM,EAAD,IAChCmB,EAAS,CAACiB,KAAMb,EAAWc,YAR5B,yDAAP,sDAD6B,SAAClB,GAAD,OAAcA,EAAS,CAACiB,OAAM3B,WAczDiC,EAAY,SAACN,GACf,OAAOA,GACH,KAAKf,EAAa,OAAOb,EACzB,KAAKgB,EAAe,OAAOd,EAC3B,KAAKe,EAAkB,OAAOd,EAC9B,QAAS,SAIJgC,EAAgB,SAACP,EAAMI,GAAP,MAAmB,CAACJ,OAAMI,WAE1CI,EAAmB,SAACR,EAAMJ,GAAP,MAA0B,CAACI,OAAMJ,kBCzE7Da,GAAc,aACdC,GAAc,cACdC,GAAc,aACdC,GAAc,cACdC,GAAc,cAGZC,GAAmB,CAAErC,MAAM,EAAOhC,OAAO,EAAOL,KAAM,GAAI2E,OAAO,EAAOC,WAAY,CAACtE,MAAO,GAAIC,KAAM,KAE/FsE,GAAiB,WAAuC,IAAtCnB,EAAqC,uDAA7BgB,GAAkBf,EAAW,uCAChE,OAAOA,EAAOC,MACV,KAAKS,GAAa,OAAO,2BAAKX,GAAZ,IAAmBrB,KAAOsB,EAAOD,QACnD,KAAKY,GAAa,OAAO,2BAAKZ,GAAZ,IAAmBrD,MAAOsD,EAAOD,QACnD,KAAKa,GAAa,OAAO,2BAAKb,GAAZ,IAAmB1D,KAAO2D,EAAOD,QACnD,KAAKc,GAAa,OAAO,2BAAKd,GAAZ,IAAmBiB,MAAOhB,EAAOD,QACnD,KAAKe,GAAa,OAAO,2BAAKf,GAAZ,IAAmBkB,WAAYjB,EAAOD,QACxD,QAAS,OAAOA,IAIXoB,GAAiB,SAAClB,EAAMF,GAAP,MAAkB,CAACE,OAAMF,UCnB1CqB,GAAY,YAEnBC,GAAiB,CAACzB,SAAS,EAAO/B,MAAO,GAAIyD,MAAM,IAE5CC,GAAe,WAAqC,IAApCxB,EAAmC,uDAA3BsB,GAAgBrB,EAAW,uCAC5D,OAAOA,EAAOC,MACV,KAAKmB,GAAW,OAAO,2BAAKrB,GAAUC,EAAOE,SAC7C,QAAS,OAAOH,IAIXyB,GAAc,WACvB,IAAItB,EAASD,EAAOmB,GACpB,8CAAO,WAAOpC,GAAP,eAAAjD,EAAA,6DAEHiD,EAAS,CAACiB,OAAMC,QADhBA,EAAU,CAACN,SAAS,EAAM/B,MAAO,MAD9B,kBCZyB7B,EAAKC,IAAIC,IAAS,cAAcK,MAAK,SAAAC,GAAI,OAAIA,EAAKC,QDY3E,OAIK6E,EAJL,OAMCtC,EAAS,CAACiB,OAAMC,QADhBA,EAAU,CAACN,SAAS,EAAO0B,QAAOzD,MAAO,MAL1C,kDAQCqC,EAAU,CAACN,SAAS,EAAO/B,MAAM,EAAD,IAChCmB,EAAS,CAACiB,OAAMC,YATjB,0DAAP,uDEFWvB,GAPD8C,YACVC,YAAgB,CACZC,SAAUJ,GACV7C,KAAUoB,EACV8B,QAAUV,KACVW,YAAgBC,M,QCmBTC,GA9BE,SAAC,GAIX,IAAD,IAHFC,KAAOpG,EAGL,EAHKA,KAAMqG,EAGX,EAHWA,MAAOC,EAGlB,EAHkBA,MAAOC,EAGzB,EAHyBA,QAASC,EAGlC,EAHkCA,OAAa/B,EAG/C,EAH0CgC,IAG1C,IAFFC,GAAKC,EAEH,EAFGA,mBAAoBC,EAEvB,EAFuBA,qBAAsBC,EAE7C,EAF6CA,iBAAkBC,EAE/D,EAF+DA,SACjEC,EACE,EADFA,MAEA,OACI,sBAAKC,UAAU,mBAAf,SACI,uBAAKA,UAAU,gCAAgCD,MAAOA,EAAOE,QAAS,SAACC,GAAD,OAAOL,EAAiBK,EAAGzC,IAAjG,UACI,sBAAKuC,UAAU,gCAAgCG,IAAKd,EAAOe,IAAI,UAAUC,OAAQrH,EAAMiH,QAASH,IAChG,uBAAKE,UAAU,YAAf,UACI,oBAAGA,UAAU,+BAA+BC,QAAS,kBAAML,EAAqBnC,MAChF,sBAAIuC,UAAU,eAAd,UAA8BhH,EAC1B,yBAAOgH,UAAU,YAAjB,oBAAgCV,EAAMgB,WAAWC,QAAQ,2BAA4B,aAEzF,sBAAIP,UAAU,YAAd,UACI,gCACKT,EAAQe,WAAWC,QAAQ,2BAA4B,SAFhE,aAKA,uBAAKP,UAAU,qBAAf,UACI,sBAAKA,UAAU,WAAWC,QAAS,kBAAMN,EAAmBlC,EAAQ,IAApE,eACA,sBAAKuC,UAAU,cAAf,SAA8BR,IAC9B,sBAAKQ,UAAU,SAASC,QAAS,kBAAMN,EAAmBlC,GAAS,IAAnE,2BCeT+C,GAnCK,SAAC,GAA+F,IAAD,IAA7F9E,KAAO1C,EAAsF,EAAtFA,KAAMyH,EAAgF,EAAhFA,WAAYC,EAAoE,EAApEA,UAAWpB,EAAyD,EAAzDA,MAAOD,EAAkD,EAAlDA,MAAOI,EAA2C,EAA3CA,IAA2C,IAArCC,GAAKiB,EAAgC,EAAhCA,SAAUC,EAAsB,EAAtBA,gBAAsB,EAEpFC,mBAAS,GAF2E,mBAEzGrB,EAFyG,KAEjGsB,EAFiG,KAIzGC,EAAe,SAACC,GACfxB,EAASwB,EAAU,IAAMxB,EAASwB,EAAU,GAC/CF,GAAU,SAAAtB,GAAM,OAAIA,EAASwB,MAGjC,OACI,uBAAKhB,UAAU,yBAAf,UACI,qBAAIA,UAAU,qCAAqCC,QAASU,EAA5D,oBACA,sBAAKX,UAAU,sCACXD,MAAO,CAACkB,WAAW,OAAD,OAAS5B,EAAT,wBACtB,uBAAKW,UAAU,0CAAf,UACI,qBAAIA,UAAU,gCAAd,SAA+ChH,IAC/C,qBAAIgH,UAAU,6BAAd,SAA4CS,IAC5C,oBAAGT,UAAU,oBAAb,SAAkCU,IAClC,uBAAKV,UAAU,SAAf,UACI,uBAAKA,UAAU,SAAf,UACI,sBAAKA,UAAU,gBAAgBC,QAAS,kBAAMc,EAAa,IAA3D,eACA,sBAAKf,UAAU,6BAAf,SAA6CR,IAC7C,sBAAKQ,UAAU,eAAeC,QAAS,kBAAMc,GAAc,IAA3D,kBAEJ,sBAAIf,UAAU,+CAAd,UAA8DV,EAA9D,aACCE,EAAS,GAAK,wBAAMQ,UAAU,6BAAhB,8CACFV,EAAQE,GAAQc,WAAWC,QAAQ,2BAA4B,OAD7D,aAGf,oBAAGP,UAAU,wCAAwCC,QAAS,kBAAMW,EAAgBnB,EAAKH,EAAOE,IAAWmB,iB,0BC9BlHO,GAAoB,SAApBA,EAAqBC,EAASC,GACvC,QAAGD,EAAQnB,UAAUqB,MAAM,KAAKC,SAASF,MACtCD,EAAQI,WAAWvB,WAAkBkB,EAAkBC,EAAQI,WAAYH,IAIrEI,GAAkB,SAACC,GAE5B,IAAIC,GADJD,EAAO,IAAIE,KAAKF,IACCG,WAAa,EAC1BC,EAAMJ,EAAKK,UAGf,OAFGJ,EAAMpB,WAAWpE,OAAS,IAAGwF,EAAQ,IAAMA,GAC3CG,EAAIvB,WAAWpE,OAAS,IAAK2F,EAAQ,IAAMA,GACxC,GAAN,OAAUA,EAAV,YAAiBH,EAAjB,YAA0BD,EAAKM,gBCuKpBC,iBAPS,SAAC,GAAD,QAAElG,KAAOA,EAAT,EAASA,KAAMmB,EAAf,EAAeA,cAAf,MAAuD,CAACyB,MAAxD,EAA+BK,SAAWL,MAAqB5C,OAAMmB,oBAClE,SAACb,GAAD,MAAe,CACtCC,SAAU,SAACgB,EAAM3B,GAAP,OAAgBU,EAASC,EAASgB,EAAM3B,KAClDkC,cAAe,SAACP,EAAMI,GAAP,OAAkBrB,EAASwB,EAAcP,EAAMI,KAC9DI,iBAAkB,SAACR,EAAMJ,GAAP,OAAyBb,EAASyB,EAAiBR,EAAMJ,QAGhE+E,EAvKF,SAAC,GAAoG,IAA7FC,EAA4F,EAAlGnG,KAAa4C,EAAqF,EAArFA,MAAsBwD,EAA+D,EAA9EjF,cAA+BZ,EAA+C,EAA/CA,SAAUuB,EAAqC,EAArCA,cAAeC,EAAsB,EAAtBA,iBAAsB,EAEtFgD,mBAASoB,GAF6E,mBAEvGnG,EAFuG,KAEjGqG,EAFiG,OAG9EtB,mBAASnC,GAHqE,mBAGvGK,EAHuG,KAG7FqD,EAH6F,OAI5EvB,mBAAS,IAJmE,mBAIvGwB,EAJuG,KAI5FC,EAJ4F,OAKpEzB,mBAASqB,GAL2D,mBAKvGjF,EALuG,KAKxFsF,EALwF,OAMtF1B,mBAAS,MAN6E,mBAMvGnF,EANuG,KAMjG8G,EANiG,KAOvGC,EAAUC,eAEVC,EAAS,CACXC,aAAc,CAAEC,gBAAiB,QAASC,OAAQ,8BAClDC,gBAAiB,CAAEF,gBAAiB,qBAAsBC,OAAQ,QAClEE,UAAW,CAACC,SAAU,OAAQC,OAAQ,YAAaC,QAAS,eAAgBC,MAAO,QAASC,WAAY,gBACxGC,cAAe,CAACH,QAAS,eAAgBD,OAAQ,cAGrDK,qBAAU,WAKN,OAJqBxH,GAAMyH,WAAU,WAAO,IAAD,EACkBzH,GAAMC,WAA7C0C,EADqB,EAChCK,SAAWL,MADqB,IACb5C,KAAOA,EADM,EACNA,KAAMmB,EADA,EACAA,cACvCkF,EAAQrG,IAASyG,EAAiBtF,IAAkBmF,EAAY1D,QAGrE,IAEH6E,qBAAU,kBAAME,MAAoB,CAAC3H,IAErC,IAAM2H,EAAmB,WACjB3H,EAAKG,OACTqG,EAAaxG,EAAKG,MAAMsB,KAAI,SAAA6B,GAAS,IAAD,gBAChBL,GADgB,IAChC,IAAI,EAAJ,qBAA0B,CAAC,IAAnBrD,EAAkB,QACtB,GAAGA,EAAK+D,MAAQL,EAAKvD,QAArB,CADsB,IAEjB2D,EAAmBJ,EAAnBI,OAAQD,EAAWH,EAAXG,QACb,OAAO,2BAAI7D,GAAX,IAAiB8D,SAAQD,cAJG,kCAMjCmE,YAUD/D,EAAqB,SAAClC,EAAQuD,GAAa,IAAD,EACXlF,EAAKG,MAAMH,EAAKG,MAAM0H,WAAU,SAAAjI,GAAI,OAAIA,EAAKG,UAAY4B,MACtF/B,EAAO,CAACG,QAFgC,EACvCA,QACgB2D,OAFuB,EAC9BA,OACeD,QAFe,EACtBA,SAEtB,KAAG7D,EAAK8D,OAASwB,EAAU,IAAMtF,EAAK8D,OAASwB,EAAU,GAAzD,CACA,IAAI1B,EAAQP,EAASA,EAAS4E,WAAU,SAAAjI,GAAI,OAAIA,EAAK+D,MAAQhC,MAAS6B,MACtE5D,EAAK8D,QAAUwB,EACftF,EAAK6D,QAAUD,EAAQ5D,EAAK8D,OAC5BoE,EAAWnH,EAAef,EAAM,0CAG9BkE,EAAuB,SAACnC,GAC1BmG,EAAWlH,EAAkBe,EAAQ,4BAClCR,EAAcqE,SAAS7D,IAASG,EAAcd,EAAiBW,IAGhEmG,EAAU,uCAAG,WAAOvG,EAAMC,EAASuG,GAAtB,SAAA1K,EAAA,sEACTkD,EAASgB,EAAMC,GADN,OAEfwG,EAAcD,GAFC,2CAAH,0DAKVC,EAAgB,SAACD,GACP9H,GAAMC,WAAWF,KAAKb,MAE7BD,IAAMC,MAAM,yJADND,YAAM,kCAAD,OAAU6I,EAAV,2CAIdhE,EAAmB,SAAC,EAAmBpC,GAAY,IAAtB0D,EAAqB,EAA7B4C,OACpB7C,GAAkBC,EAAS,gBAC3BA,EAAQnB,UAAUsB,SAAS,aAA6C,cAA9BmB,EAAQpI,SAAS2J,WAE1D/G,EAAcqE,SAAS7D,GACtBG,EAAcd,EAAiBW,GADAG,EAAcjB,EAAQc,KAwBxDqC,EAAW,SAAC,GAA0D,IAAhBrC,EAAe,EAAxDsG,OAAQE,WAAa5D,OAAS6D,UAC7C,GAAiC,cAA9BzB,EAAQpI,SAAS2J,SAApB,CACA,IAAItI,EAAOqD,EAASvB,QAAO,SAAA9B,GAAI,OAAIA,EAAK1C,OAASyE,KACjD+E,EAAO,WAAP,cAAW9G,MAGf,OACI,uBAAKsE,UAAU,OAAf,UACKqC,EAAUnG,OAAQ,uCACf,uBAAK8D,UAAU,0BAAf,UACI,uBAAKA,UAAU,WAAf,UACI,sBAAKA,UAAU,kBAAkBC,QA/B7B,WACjBhD,EAAcf,SAAWmG,EAAUnG,OAAQ2B,EAAiBhB,EAAc,IACxEgB,EAAiBjB,EAAYyF,EAAU9E,KAAI,SAAA7B,GAAI,OAAIA,EAAK+D,SA6B7C,SACKxC,EAAcf,SAAWmG,EAAUnG,OAAS,sBAAK8D,UAAU,kBAAuB,KAEvF,wBAAOA,UAAU,qBAAjB,SACK/C,EAAcf,SAAWmG,EAAUnG,OAAS,oDAAc,+FAGlEe,EAAcf,OAAQ,uBAAK8D,UAAU,YAAf,UACnB,wBAAOA,UAAU,kBAAjB,kHACA,oBAAGmE,GAAG,QAAQnE,UAAU,mBAAmBC,QAnChC,WAC3BhD,EAAcd,QAAd,uCAAsB,WAAMsB,GAAN,SAAAtE,EAAA,sEAAsBkD,EAASK,EAAkBe,GAAjD,mFAAtB,uDACAI,EAAiBhB,EAAc,UAkCX,MAGZ,sBAAKsH,GAAG,aAAanE,UAAU,MAA/B,SACKqC,EAAUnG,OACXmG,EAAU9E,KAAI,SAAA6B,GAAI,OAAI,eAAC,GAAD,CAElBA,KAAMA,EACNM,GAAI,CAACC,qBAAoBC,uBAAsBC,mBAAkBC,YACjEC,MAAO9C,EAAcqE,SAASlC,EAAKK,KAAMkD,EAAOC,aAAcD,EAAOI,iBAHhE3D,EAAKK,QAIV,KAGR,uBAAKO,UAAU,uBAAf,UACI,sBAAIA,UAAU,aAAd,uFAEI,wBAAMA,UAAU,yBAAhB,cAA2C/C,EAAcf,OAAzD,OACA,wBAHJ,wEAKI,wBAAM8D,UAAU,wBAAhB,UACK,IAnDA,WACrB,IAAIoE,EAAe,EAEnB,OADA/B,EAAUlG,SAAQ,SAAAT,GAAI,OAAIuB,EAAcqE,SAAS5F,EAAK+D,KAAM2E,GAAgB1I,EAAK6D,QAAS,QACnF6E,EAgDmBC,GAAmB/D,WAAWC,QAAQ,2BAA4B,OAD5E,gBAIJ,yBAAQ4D,GAAG,UAAUnE,UAAU,eAAesE,UAAWrH,EAAcf,OAAvE,qEAGR,uCACI,qBAAI6D,MAAO4C,EAAOW,cAAlB,SAAiC,6IACjC,oBAAGtD,UAAU,uBAAuBD,MAAO4C,EAAOK,eAGtD,eAAC,KAAD,CAAMuB,GAAG,YAAYvE,UAAU,gCAAgCC,QAxDrD,kBAAMlE,GAAMK,SAASmC,GAAeT,IAAY,KAwD1D,2EACCpC,GACG,sBAAKsE,UAAU,iDAAf,SACI,eAAC,GAAD,CAAatE,KAAMA,EAAMgE,GAAI,CAACiB,SAzD7B,kBAAM6B,EAAQ,OAyDyB5B,gBApHhC,SAAC/E,EAASyD,GAAuB,IAAhBE,EAAe,uDAAN,EAC1CgF,EAAe1I,EAAKG,MAAMH,EAAKG,MAAM0H,WAAU,SAAAvE,GAAI,OAAIA,EAAKvD,UAAYA,MAC5E,GAAG2I,EAAc,OAAO7E,EAAmB9D,EAAS2D,GACpD,IAAI9D,EAAO,CAAEG,UAAS2D,SAAQD,QAASD,EAAQE,GAC/CoE,EAAWtH,EAAaZ,EAAM,oDC7CvB+I,GARA,WACX,OACI,yBAAQzE,UAAU,aCsDXgC,iBAHS,SAAC7E,GAAD,MAAY,CAAC6B,QAAS7B,EAAM6B,QAAS0F,UAAWvH,EAAMrB,KAAKA,KAAKG,MAAQkB,EAAMrB,KAAKA,KAAKG,MAAMC,OAAS,MACpG,SAACE,GAAD,MAAe,CAACmC,eAAgB,SAAClB,EAAMF,GAAP,OAAiBf,EAASmC,GAAelB,EAAMF,QAE3F6E,EAnDA,SAAC,GAA0C,IAAzChD,EAAwC,EAAxCA,QAAS0F,EAA+B,EAA/BA,UAAWnG,EAAoB,EAApBA,eAE3BkE,EAAUC,eAFqC,EAGhC7B,mBAAS4B,EAAQpI,SAAS2J,UAHM,mBAG/CW,EAH+C,KAG1CC,EAH0C,KAKrDrB,qBAAU,kBAAMd,EAAQoC,QAAO,SAACxK,GAAD,OAAcuK,EAAOvK,EAAS2J,eAAa,CAACvB,IAW3E,OACI,sBAAKzC,UAAU,mDAAf,SACI,uBAAKA,UAAU,kBAAf,UACI,sBAAKA,UAAU,2BAA2BmE,GAAG,qBAA7C,SACI,uBAAKnE,UAAU,aAAf,UACI,eAAC,KAAD,CAASuE,GAAG,QAAQvE,UAAU,WAA9B,gCACA,sBAAKA,UAAU,WAAf,8DACA,eAAC,KAAD,CAASuE,GAAG,YAAYvE,UAAU,WAAlC,kDACA,sBAAKA,UAAU,WAAf,mDACChB,EAAQZ,OAAS,eAAC,KAAD,CACdmG,GAAG,QACHvE,UAAU,WACVD,MAAO,CAAC,MAAS4E,EAAIrD,SAAS,UAAY,SAH5B,gFAO1B,wBAAMtB,UAAWhB,EAAQlF,MAAO,iCAAkC,0BAC9DmG,QAtBG,WACf1B,EAAeR,IAAciB,EAAQlF,OACrCkF,EAAQlD,MAASyC,EAAeT,IAAY,IAmBpC,UAEI,sBAAKkC,UAAU,WAAWmE,GAAG,aAA7B,SACKnF,EAAQvF,MAAQ,mCAErB,oBAAGuG,UAAU,0BAEjB,oBAAGA,UAAWhB,EAAQlD,KAAM,yCAA0C,kCAClEmE,QAjCE,WACd1B,EAAeT,IAAakB,EAAQlD,MACpCkD,EAAQlF,OAASyE,EAAeR,IAAa,IA8BrC,SAEK2G,EAAY,uBAAM1E,UAAU,cAAhB,SAA+B0E,IAAkB,a,kBCrBnEI,GAzBD,SAAC,GAA6F,IAAD,IAA3FC,UAAY1H,EAA+E,EAA/EA,KAAM2H,EAAyE,EAAzEA,MAAOC,EAAkE,EAAlEA,YAAaC,EAAqD,EAArDA,YAAqD,IAAvCC,QAAUC,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,eAClF,OACI,uCACI,wBACIC,WAAW,IACXjI,KAAMA,EACN8G,GAAIa,EACJhM,KAAMgM,EACNC,YAAaA,EACbM,MAAOH,EAAOI,OAAOR,GACrBhF,UAAWkF,EAAYF,GAAQ,sBAAuB,eACtDS,SAAUL,EAAOM,aACjBC,QAAS,kBAAMN,GAAe,SAAAO,GAAM,kCAASA,GAAT,mBAAkBZ,GAAQ,QAC9Da,OAAQ,SAAC3F,GACLkF,EAAOU,WAAW5F,GAClBmF,GAAe,SAAAO,GAAM,kCAASA,GAAT,mBAAkBZ,GAAQ,UAGtDI,EAAOW,QAAQf,IAAUI,EAAOY,OAAOhB,GACpC,wBAAOhF,UAAU,iCAAjB,SAAmDoF,EAAOY,OAAOhB,KAAiB,SCoEnFhD,iBAHS,SAAC,GAAD,MAAgB,CAAChD,QAAjB,EAAEA,YACC,SAAC5C,GAAD,MAAe,CAACmC,eAAgB,SAAClB,EAAMF,GAAP,OAAiBf,EAASmC,GAAelB,EAAMF,QAE3F6E,EA/EA,SAAC,GAA+B,IAA9BhD,EAA6B,EAA7BA,QAAST,EAAoB,EAApBA,eAAoB,EAELsC,mBAAS,IAFJ,mBAEpCqE,EAFoC,KAEvBG,EAFuB,KAiBpCY,EAAQ,uCAAG,WAAMT,GAAN,iBAAArM,EAAA,6DACNY,EAAmByL,EAAnBzL,MAAOmM,EAAYV,EAAZU,SADD,kBAGHpM,EAAMC,EAAOmM,GAHV,OAIT3H,EAAeP,GAAYjF,IAAiBC,MAJnC,gDAKEmN,QAAQC,IAAR,MALF,yDAAH,sDAQRhB,EAASiB,aAAU,CACrBC,cAAe,CACXvM,MAAOiF,EAAQX,WAAWtE,MAC1BmM,SAAUlH,EAAQX,WAAWrE,MAEjCuM,SA1Ba,SAAAf,GACb,IAAMQ,EAAS,GASf,OAPIR,EAAOzL,MACF,4CAA4CyM,KAAKhB,EAAOzL,SAAQiM,EAAOjM,MAAQ,gFADtEiM,EAAOjM,MAAQ,gDAG7ByL,EAAOU,SACHV,EAAOU,SAAShK,OAAS,EAAG8J,EAAOE,SAAW,2MAC9CV,EAAOU,SAAShK,OAAS,MAAK8J,EAAOE,SAAW,mNAFnCF,EAAOE,SAAW,gDAIhCF,GAiBPC,aASJ,OACI,sBAAKjG,UAAU,eAAf,SACMhB,EAAQvF,KAyBV,uBAAKuG,UAAU,aAAf,UACI,4DAAS,uBAAMA,UAAU,YAAhB,SAA6BhB,EAAQvF,UAC9C,oCAAM,oIACN,yBAAQ0K,GAAG,UAAUnE,UAAU,yBAAyBC,QApC9C,WfXtBpH,aAAa4N,WAAWhO,GACxBI,aAAa4N,WAAW9N,GACxBE,aAAa4N,WAAW/N,GACxB0B,OAAOC,SAASC,SeUZiE,EAAeP,GAAY,IAC3BO,EAAeR,IAAa,IAiCpB,+CA5BY,uBAAKiC,UAAU,eAAf,UACZ,wBAAMmE,GAAG,aAAanE,UAAU,OAAOiG,SAAUb,EAAOsB,aAAxD,UACI,sBAAK1G,UAAU,OAAf,SACI,eAAC,GAAD,CACI+E,UAAW,CAAC1H,KAAM,QAAS2H,MAAO,QAASC,YAAa,0DAAcC,eACtEC,QAAS,CAACC,SAAQC,sBAG1B,sBAAKrF,UAAU,OAAf,SACI,eAAC,GAAD,CACI+E,UAAW,CAAC1H,KAAM,WAAY2H,MAAO,WAAYC,YAAa,iCAASC,eACvEC,QAAS,CAACC,SAAQC,sBAG1B,yBAAQhI,KAAK,SAAS2C,UAAU,yBAAhC,+CAEJ,qBAAGA,UAAU,OAAb,kHACI,eAAC,KAAD,CACIuE,GAAG,UACHvE,UAAU,oBACVC,QAAS,kBAAM1B,EAAeR,IAAa,IAH/C,wDCzCL4I,GA1BI,SAAC,GAA+C,IAA9CC,EAA6C,EAA7CA,WAAYC,EAAiC,EAAjCA,YAAaC,EAAoB,EAApBA,eAC1C,OACI,uBAAK3C,GAAG,kBAAkBnE,UAAU,kBAApC,UACI,yBACImE,GAAG,YACHnE,UAAU,8BACVC,QAAS,kBAAM6G,GAAe,SAAAD,GAAW,OAAIA,EAAc,MAC3DvC,SAAUuC,EAAc,EAJ5B,8CAMA,sBAAK7G,UAAU,6BAAf,SACK4G,EAAWrJ,KAAI,SAAAwJ,GAAI,OAAI,yBAEpB/G,UAAW6G,IAAgBE,EAAO,EAAI,4BAA8B,oCACpE9G,QAAS,kBAAM6G,EAAeC,EAAO,IAHjB,SAItBA,GAHOA,QAKb,yBACI5C,GAAG,YACHnE,UAAU,8BACVC,QAAS,kBAAM6G,GAAe,SAAAD,GAAW,OAAIA,EAAc,MAC3DvC,SAAUuC,GAAeD,EAAW1K,OAAS,EAJjD,sCCAG8K,GAdiB,WAAO,IAAD,EACUnG,mBAASzG,OAAO6M,SAD1B,mBAC3BC,EAD2B,KACXC,EADW,KAE5BC,EAAeC,SAASC,KAAKC,aAC7BC,EAAeH,SAASI,gBAAgBF,aAQhD,OANEhE,qBAAU,WACN,IAAMmE,EAAe,kBAAMP,EAAkB/M,OAAO6M,UAEpD,OADA7M,OAAOuN,iBAAiB,SAAUD,GAC3B,kBAAMtN,OAAOwN,oBAAoB,SAAUF,MACnD,IAEEN,GAAcI,EAAeN,ICVzBW,GAAe,SAACC,EAAOC,EAAQC,EAASC,EAAMC,GACvD,OAAO9O,EAAKC,IAAL,UAAYC,IAAZ,YAAsBwO,EAAtB,iBAAoCC,EAApC,kBAAoDC,EAApD,iBAAoEC,EAApE,kBAAkFC,IACxFvO,MAAK,SAAAC,GAAI,OAAIA,EAAKC,SAGVsO,GAAc,SAACL,EAAOC,EAAQC,EAASC,EAAMC,EAAOE,GAC7D,OAAOhP,EAAKC,IAAL,UAAYC,IAAZ,YAAsBwO,EAAtB,wBAA2CC,EAA3C,kBAA2DC,EAA3D,iBAA2EC,EAA3E,kBAAyFC,EAAzF,cAAoGE,IAC1GzO,MAAK,SAAAC,GAAI,OAAIA,EAAKC,SAGVwO,GAAiB,SAACP,EAAOM,GAAR,OAAwBhP,EAAKC,IAAL,UAAYC,IAAZ,YAAsBwO,EAAtB,0BAA6CM,IAAezO,MAAK,SAAAC,GAAI,OAAIA,EAAKC,SAEvHyO,GAAW,SAACR,GAAD,OAAW1O,EAAKC,IAAL,UAAYC,IAAZ,YAAsBwO,EAAtB,WAAqCnO,MAAK,SAAAE,GAAI,MAAyB,kBAAdA,EAAKA,KAAmBA,EAAKA,KAAO,MAEnH0O,GAAU,SAACT,EAAO1I,GAAR,OAAiBhG,EAAKM,KAAL,UAAaJ,IAAb,YAAuBwO,EAAvB,QAAoC1I,IAE/DoJ,GAAgB,SAACC,GAAD,IAAMhL,EAAN,uDAAe,GAAf,OAAsBrE,EAAKM,KAAL,UAAaJ,IAAb,4BAAuCmE,EAAS,OAASA,EAAS,IAAMgL,IAE9GC,GAAW,SAACZ,EAAOa,EAAQvJ,GAAhB,OAAyBhG,EAAKkC,IAAL,UAAYhC,IAAZ,YAAsBwO,EAAtB,oBAAuCa,GAAUvJ,IAErFwJ,GAAa,SAACd,EAAOa,GAAR,OAAmBvP,EAAKoC,OAAL,UAAelC,IAAf,YAAyBwO,EAAzB,mBAAyCa,KCwFvEE,GAzGQ,SAAC,GAAuC,IAAtCpP,EAAqC,EAArCA,KAAqC,IAA/BiG,GAAKoJ,EAA0B,EAA1BA,UAAWC,EAAe,EAAfA,SAAe,EAErBlI,mBAAS,IAFY,mBAEpDqE,EAFoD,KAEvCG,EAFuC,KAIpD1C,EAAS,CACXqG,cAAe,CAACC,MAAO,OAAQC,OAAQ,QACvCC,KAAM,CAACtG,gBAAiB,OAAQuG,SAAU,QAASC,UAAW,QAASC,UAAW,SAyBhFrD,EAAQ,uCAAG,WAAMT,GAAN,SAAArM,EAAA,yDACVqM,EAAOU,WAAUV,EAAOxL,KAAOwL,EAAOU,iBAClCV,EAAOU,SAFD,SAILzM,EAJK,gCAIO8O,GAAQ,QAAS/C,GAJxB,+CAKEkD,GAAS,QAASjP,EAAKgG,IAAK+F,GAL9B,QAMTsD,EAAU,MACVC,GAAS,SAAAQ,GAAG,OAAKA,KACjBvO,YAAM,wCAAD,OAAWvB,EAAO,uCAAW,uCAA7B,0CARI,kDASE0M,QAAQC,IAAR,MACXpL,IAAMC,MAAM,+JAVH,0DAAH,sDAaRmK,EAASiB,aAAU,CACrBC,cAAe,CACXtN,KAAOS,EAAOA,EAAKT,KAAO,GAC1Be,MAAON,EAAOA,EAAKM,MAAQ,GAC3Bd,KAAOQ,EAAOA,EAAKR,KAAQ,GAC3BiN,SAAU,IAEdK,SA1Ca,SAAAf,GACb,IAAMQ,EAAS,GAkBf,OAhBIR,EAAOxM,KACHwM,EAAOxM,KAAKkD,OAAS,EAAG8J,EAAOhN,KAAO,mLACtCwM,EAAOxM,KAAKkD,OAAS,MAAK8J,EAAOhN,KAAO,iMAF/BgN,EAAOhN,KAAO,gDAI3BwM,EAAOzL,MACF,4CAA4CyM,KAAKhB,EAAOzL,SAAQiM,EAAOjM,MAAQ,gFADtEiM,EAAOjM,MAAQ,gDAG7ByL,EAAOvM,KACa,UAAhBuM,EAAOvM,MAAoC,YAAhBuM,EAAOvM,OAAoB+M,EAAO/M,KAAO,2GAD3D+M,EAAO/M,KAAO,gDAG3BQ,IACI+L,EAAOU,SACHV,EAAOU,SAAShK,OAAS,EAAG8J,EAAOE,SAAW,2MAC9CV,EAAOU,SAAShK,OAAS,MAAK8J,EAAOE,SAAW,mNAFnCF,EAAOE,SAAW,iDAKpCF,GAwBPC,aAGJ,OACI,sBAAKjG,UAAU,uEAAuED,MAAO4C,EAAOqG,cAApG,SACI,wBACIhJ,UAAU,eACVD,MAAO4C,EAAOwG,KACdlD,SAAUb,EAAOsB,aAHrB,UAKI,qBAAI1G,UAAU,wBAAd,2EACA,uBAAKA,UAAU,WAAf,UACI,uBAAKA,UAAU,gCAAf,UACI,wBAAOA,UAAU,qBAAqBwJ,QAAQ,OAA9C,0DACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,OAAQ2H,MAAO,OAAQC,YAAa,8CAAYC,eAClEC,QAAS,CAACC,SAAQC,uBAG1B,uBAAKrF,UAAU,gCAAf,UACI,wBAAOA,UAAU,qBAAqBwJ,QAAQ,QAA9C,sEACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,QAAS2H,MAAO,QAASC,YAAa,0DAAcC,eACtEC,QAAS,CAACC,SAAQC,uBAG1B,uBAAKrF,UAAU,gCAAf,UACI,wBAAOA,UAAU,qBAAqBwJ,QAAQ,WAA9C,6CACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,WAAY2H,MAAO,WAAYC,YAAa,iCAASC,eACvEC,QAAS,CAACC,SAAQC,uBAG1B,uBAAKrF,UAAU,gCAAf,UACI,wBAAOA,UAAU,qBAAqBwJ,QAAQ,OAA9C,uCACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,OAAQ2H,MAAO,OAAQC,YAAa,2BAAQC,eAC9DC,QAAS,CAACC,SAAQC,0BAI9B,uBAAKrF,UAAU,sBAAf,UACI,yBACI3C,KAAK,SAAS8G,GAAG,aAAanE,UAAU,uCACxCC,QAAS,kBAAM6I,EAAU,OAF7B,sCAIA,yBAAQzL,KAAK,SAAS8G,GAAG,SAASnE,UAAU,wCAA5C,yCClFLyJ,GApBC,SAAC,GAAgE,IAA/DhQ,EAA8D,EAA9DA,KAA8D,IAAxDiG,GAAKgK,EAAmD,EAAnDA,cAAeC,EAAoC,EAApCA,iBAAmBC,EAAiB,EAAjBA,MAAO7C,EAAU,EAAVA,KAC3D/N,EAAwCS,EAAxCT,KAAMe,EAAkCN,EAAlCM,MAAO8P,EAA2BpQ,EAA3BoQ,aAAc5Q,EAAaQ,EAAbR,KAAMwG,EAAOhG,EAAPgG,IACxC,OACI,gCACI,8BAAa,GAAPsH,EAAa6C,EAAQ,IAC3B,8BAAK5Q,IACL,8BAAKe,IACL,8BAAKyH,GAAgBqI,KACrB,8BACI,yBAAQ7J,UAAU,8BAAlB,oDAEJ,8BAAK/G,IACL,gCACI,yBAAQ+G,UAAU,mCAAmCC,QAAS,kBAAMyJ,EAAcjQ,IAAlF,4CACA,yBAAQuG,UAAU,gCAAgCC,QAAS,kBAAM0J,EAAiBlK,IAAlF,mDCyCDqK,GArDI,SAAC,GAGb,IAFQC,EAET,EAFFC,UAAkBnD,EAEhB,EAFgBA,YAAaoD,EAE7B,EAF6BA,aAA0BC,EAEvD,EAF2CC,WAE3C,IADFzK,GAAKqJ,EACH,EADGA,SAAUqB,EACb,EADaA,iBAAkBC,EAC/B,EAD+BA,gBAAiBC,EAChD,EADgDA,gBAAiBC,EACjE,EADiEA,cAG7DC,EAAuBxD,KAEvBrE,EAAS,CACX8H,OAAQ,CAACC,OAAQF,EAAuB,IAAM,GAAK,IAAMA,IAG7D,OACI,uCACI,yBAAOxK,UAAU,sBAAjB,UACI,wBAAOA,UAAU,aAAjB,SACI,gCACI,oCACA,8EACA,uEACA,gGACA,uEACA,iEACA,uGAGR,iCACK+J,EAAMxM,KAAI,SAAC9D,EAAMmQ,GAAP,OAAiB,eAAC,GAAD,CAExBnQ,KAAMA,EACNiG,GAAI,CAACgK,cAAea,EAAeZ,iBAAkBS,GACrDR,MAAOA,EACP7C,KAAMF,GAJDpN,EAAKgG,aAQtB,oBAAG0E,GAAG,UAAUnE,UAAU,kCACtBD,MAAO4C,EAAO8H,OACdxK,QAAS,kBAAMqK,GAAiBL,MAGpCA,EACI,sBAAKjK,UAAU,kBAAmBC,QAASoK,EAA3C,SACI,eAAC,GAAD,CAAgB3K,GAAI,CAACoJ,UAAWwB,EAAiBvB,gBAEzDmB,EACI,sBAAKlK,UAAU,kBAAmBC,QAASoK,EAA3C,SACI,eAAC,GAAD,CAAgB5Q,KAAMyQ,EAAYxK,GAAI,CAACoJ,UAAWyB,EAAexB,gBAExE,OCbE4B,GArCK,SAAC,GAAqE,IAApEC,EAAmE,EAAnEA,aAAmE,IAArDlL,GAAKmL,EAAgD,EAAhDA,UAAWC,EAAqC,EAArCA,WAAYC,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,UACrE,OACI,uBAAKhL,UAAU,kGAAf,UACI,uBAAKA,UAAU,gEAAgEmE,GAAG,YAAlF,UACI,eAAC,KAAD,CACII,GAAG,eACHvE,UAAU,0BACVD,MAAO,CAAC,MAA0B,UAAjB6K,GAA4B,SAHjD,kDAKA,eAAC,KAAD,CACIrG,GAAG,eACHvE,UAAU,0BACVD,MAAO,CAAC,MAA0B,UAAjB6K,GAA4B,SAHjD,wDAKA,uBAAM5K,UAAU,0BAAhB,qDAEJ,uBAAKA,UAAU,wBAAf,UACI,0BAAQyF,SAAU,gBAAWF,EAAX,EAAExB,OAASwB,MAAX,MAAiC,MAAVA,EAAewF,IAAYC,EAAUzF,IAA9E,UACI,yBAAQA,MAAM,KAAd,2EACA,yBAAQA,MAAM,IAAd,sDAEJ,0BAAQE,SAAU,gBAAWF,EAAX,EAAExB,OAASwB,MAAX,OAAuBsF,EAAUtF,IAAQpB,GAAG,SAASnE,UAAU,OAAjF,UACI,yBAAQuF,MAAM,MAAd,yDACA,yBAAQA,MAAM,OAAd,0BACA,yBAAQA,MAAM,eAAd,4CACkB,UAAjBqF,GAA4B,yBAAQrF,MAAM,QAAd,sCACX,UAAjBqF,GAA4B,yBAAQrF,MAAM,QAAd,qDAEjC,0BAAQE,SAAU,gBAAWF,EAAX,EAAExB,OAASwB,MAAX,OAAuBuF,EAAWvF,IAAQpB,GAAG,UAA/D,UACI,yBAAQoB,MAAM,IAAd,yDACA,yBAAQA,MAAM,KAAd,mEC9Bd0F,GAAgB,WAAO,IAAD,EACyB7Q,OACnD,MAAO,CAAE6O,MAFiB,EAClBiC,WACQhC,OAFU,EACCiC,cAgBdC,GAZO,WAAO,IAAD,EACUvK,mBAASoK,MADnB,mBACnBI,EADmB,KACPC,EADO,KAS1B,OANA/H,qBAAU,WACR,IAAMgI,EAAe,kBAAMD,EAAcL,OAEzC,OADA7Q,OAAOuN,iBAAiB,SAAU4D,GAC3B,kBAAMnR,OAAOwN,oBAAoB,SAAU2D,MACjD,IAEIF,GCQMG,GArBI,SAAC,GAAkE,IAAhE9P,EAA+D,EAA/DA,KAA+D,IAAzDgE,GAAK+L,EAAoD,EAApDA,iBAAkBC,EAAkC,EAAlCA,cAAgB9B,EAAkB,EAAlBA,MAAO7C,EAAW,EAAXA,KAC/D/N,EAAiE0C,EAAjE1C,KAAMsG,EAA2D5D,EAA3D4D,MAAOqM,EAAoDjQ,EAApDiQ,YAAajL,EAAuChF,EAAvCgF,UAAWrB,EAA4B3D,EAA5B2D,MAAOwK,EAAqBnO,EAArBmO,aAAcpK,EAAO/D,EAAP+D,IAE3DmM,EAAW,CAAC1C,OADAkC,KAAVnC,MAC0B,KAAO,OAAS,QAClD,OACI,gCACI,8BAAa,GAAPlC,EAAa6C,EAAQ,IAC3B,qBAAI5J,UAAU,eAAd,SAA8BhH,IAC9B,8BAAI,sBAAK+G,MAAO6L,EAAZ,SAAuBD,MAC3B,8BAAI,sBAAK3L,UAAU,YAAYD,MAAO6L,EAAlC,SAA4C,iCAAQlL,QACxD,sBAAIV,UAAU,eAAd,UAA8BV,EAAMgB,WAAWC,QAAQ,2BAA4B,OAAnF,aACA,8BAAI,sBAAKJ,IAAKd,EAAOe,IAAI,OACzB,8BAAKoB,GAAgBqI,KACrB,gCACI,yBAAQ7J,UAAU,mCAAmCC,QAAS,kBAAMyL,EAAchQ,IAAlF,4CACA,yBAAQsE,UAAU,gCAAgCC,QAAS,kBAAMwL,EAAiBhM,IAAlF,mDCyJDoM,GArKQ,SAAC,GAAuC,IAAtCnQ,EAAqC,EAArCA,KAAqC,IAA/BgE,GAAKoJ,EAA0B,EAA1BA,UAAWC,EAAe,EAAfA,SAAe,EAE7BlI,mBAASnF,EAAOA,EAAK2D,MAAQ,IAFA,mBAEpDyM,EAFoD,KAE3CC,EAF2C,OAGrBlL,mBAAS,IAHY,mBAGpDqE,EAHoD,KAGvCG,EAHuC,KAKpD1C,EAAS,CACXqG,cAAe,CAACC,MAAO,OAAQC,OAAQ,QACvCC,KAAM,CAACtG,gBAAiB,OAAQuG,SAAU,QAASC,UAAW,QAASC,UAAW,QAClF0C,SAAU,CAAC9C,OAAQ,OACnB7J,MAAO,CACH4M,gBAAgB,QAAD,OAAUH,EAAV,MACfI,eAAgB,UAChBC,mBAAoB,SACpBC,iBAAkB,YAClBC,UAAW,QAASC,UAAW,eA0BjCrG,EAAQ,uCAAG,WAAMT,GAAN,eAAArM,EAAA,sEACMoT,IADN,UACTC,EADS,2DAGbhH,EAAOnG,MAAQmN,EAHF,SAKL9Q,EALK,kCAKO6M,GAAQ,QAAS/C,GALxB,iDAMEkD,GAAS,QAAShN,EAAK+D,IAAK+F,GAN9B,QAOTsD,EAAU,MACVC,GAAS,SAAAQ,GAAG,OAAKA,KACjBvO,YAAM,kCAAD,OAAUU,EAAO,uCAAW,uCAA5B,0CATI,kDAUEV,IAAMC,MAAM,+JAVd,0DAAH,sDAaRmK,EAASiB,aAAU,CACrBC,cAAe,CACXtN,KAAa0C,EAAOA,EAAK1C,KAAO,GAChC2S,YAAajQ,EAAOA,EAAKiQ,YAAc,GACvCrM,MAAa5D,EAAOA,EAAK4D,MAAQ,GACjCoB,UAAahF,EAAOA,EAAKgF,UAAY,GACrCrB,MAAa,IAEjBkH,SA3Ca,SAAAf,GACb,IAAMQ,EAAS,GAkBf,OAhBIR,EAAOxM,KACHwM,EAAOxM,KAAKkD,OAAS,EAAG8J,EAAOhN,KAAO,mLACtCwM,EAAOxM,KAAKkD,OAAS,MAAK8J,EAAOhN,KAAO,iMAF/BgN,EAAOhN,KAAO,gDAI3BwM,EAAOmG,YACHnG,EAAOmG,YAAYzP,OAAS,EAAG8J,EAAO2F,YAAc,2MACpDnG,EAAOmG,YAAYzP,OAAS,MAAM8J,EAAO2F,YAAc,mNAFvC3F,EAAO2F,YAAc,gDAIzCnG,EAAOlG,MACHkG,EAAOlG,MAAQ,GAAI0G,EAAO1G,MAAQ,6KAClCkG,EAAOlG,MAAQ,OAAM0G,EAAO1G,MAAQ,gMAF1B0G,EAAO1G,MAAQ,gDAI7BkG,EAAO9E,UACH8E,EAAO9E,UAAUxE,OAAS,EAAG8J,EAAOtF,UAAY,yOAChD8E,EAAO9E,UAAUxE,OAAS,MAAM8J,EAAOtF,UAAY,iPAFrCsF,EAAOtF,UAAY,gDAIlCsF,GAyBPC,aAIEsG,EAAW,uCAAG,kCAAApT,EAAA,0DACZkG,EAAQgI,SAASoF,cAAc,UAAUC,MAAM,KAErChR,EAHE,yCAGWV,IAAMC,MAAM,0JAAoC,MAH3D,UAIPoE,IAAS3D,EAJF,yCAIeA,EAAK2D,OAJpB,cAMZiI,EAAQ,IAAIqF,UACXC,OAAO,QAASvN,GAPL,mBAUiBmJ,GAAclB,EAAM5L,EAAOA,EAAK+D,IAAM,IAVvD,wBAUA+M,EAVA,EAUP3S,KAAO2S,OAVA,kBAWLA,GAXK,yCAaZxR,IAAMC,MAAM,+OACZkL,QAAQC,IAAR,MAdY,kBAeL1K,EAAOA,EAAK2D,MAAQ,MAff,0DAAH,qDA0BjB,OACI,sBAAKW,UAAU,uEAAuED,MAAO4C,EAAOqG,cAApG,SACI,wBACIhJ,UAAU,eACVD,MAAO4C,EAAOwG,KACdlD,SAAUb,EAAOsB,aAHrB,UAKI,qBAAI1G,UAAU,wBAAd,qEACA,uBAAKA,UAAU,WAAf,UACI,uBAAKA,UAAU,gCAAf,UACI,wBAAOA,UAAU,qBAAqBwJ,QAAQ,OAA9C,oDACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,OAAQ2H,MAAO,OAAQC,YAAa,wCAAWC,eACjEC,QAAS,CAACC,SAAQC,uBAG1B,uBAAKrF,UAAU,gCAAf,UACI,wBAAOA,UAAU,qBAAqBwJ,QAAQ,cAA9C,6CACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,OAAQ2H,MAAO,cAAeC,YAAa,iCAASC,eACtEC,QAAS,CAACC,SAAQC,uBAG1B,uBAAKrF,UAAU,gCAAf,UACI,wBAAOA,UAAU,qBAAqBwJ,QAAQ,QAA9C,uCACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,SAAU2H,MAAO,QAASC,YAAa,2BAAQC,eACjEC,QAAS,CAACC,SAAQC,uBAG1B,uBAAKrF,UAAU,gCAAf,UACI,wBAAOA,UAAU,qBAAqBwJ,QAAQ,QAA9C,6CACA,uBAAKxJ,UAAU,cAAf,UACI,wBACI3C,KAAK,OAAO8G,GAAG,QAAQnL,KAAK,QAC5BgH,UAAWkF,EAAY7F,MAAO,2BAA4B,oBAC1DoG,SAAU,mBA3Cd,SAACoH,GACrB,GAAIA,EAAMtH,MAAV,CACA,IAAIuH,EAAa,IAAIC,WACrBD,EAAWE,OAAS,SAAC9M,GAAD,OAAO6L,EAAW7L,EAAE6D,OAAOkJ,SAC/CH,EAAWI,cAAcL,EAAMH,MAAM,KAuCWS,CAAd,EAAEpJ,SACZ4B,QAAS,kBAAMN,GAAe,SAAAO,GAAM,kCAASA,GAAT,IAAiBvG,OAAO,QAC5DwG,OAAQ,kBAAMR,GAAe,SAAAO,GAAM,kCAASA,GAAT,IAAiBvG,OAAO,UAE/D,wBAAO+N,IAAI,QAAQC,MAAM,oBAAzB,qEAGR,sBAAKrN,UAAU,mBAAmBD,MAAO4C,EAAOtD,QAEhD,uBAAKW,UAAU,gCAAgCD,MAAO,CAACsM,UAAW,SAAlE,UACI,wBAAOrM,UAAU,qBAAqBwJ,QAAQ,YAA9C,gEACA,2BACInM,KAAK,OAAO2C,UAAU,eAAehH,KAAK,YAAYmL,GAAG,YAAYc,YAAY,oDACjFlF,MAAO4C,EAAOqJ,SACdzG,MAAOH,EAAOI,OAAO9E,UACrB+E,SAAUL,EAAOM,aACjBC,QAAS,kBAAMN,GAAe,SAAAO,GAAM,kCAASA,GAAT,IAAiBlF,WAAW,QAChEmF,OAAQ,SAAC3F,GACLkF,EAAOU,WAAW5F,GAClBmF,GAAe,SAAAO,GAAM,kCAASA,GAAT,IAAiBlF,WAAW,aAI7D,sBAAKV,UAAU,0BAA0BD,MAAO4C,EAAOtD,WAE3D,uBAAKW,UAAU,sBAAf,UACI,yBACI3C,KAAK,SAAS8G,GAAG,aAAanE,UAAU,uCACxCC,QAAS,kBAAM6I,EAAU,OAF7B,sCAIA,yBAAQzL,KAAK,SAAS8G,GAAG,SAASnE,UAAU,wCAA5C,yCC1GLsN,GAtDO,SAAC,GAGhB,IAFQvO,EAET,EAFFiL,UAAqBnD,EAEnB,EAFmBA,YAAaoD,EAEhC,EAFgCA,aAA0BsD,EAE1D,EAF8CpD,WAE9C,IADFzK,GAAKqJ,EACH,EADGA,SAAUqB,EACb,EADaA,iBAAkBC,EAC/B,EAD+BA,gBAAiBC,EAChD,EADgDA,gBAAiBC,EACjE,EADiEA,cAG7DC,EAAuBxD,KAEvBrE,EAAS,CACX8H,OAAQ,CAACC,OAAQF,EAAuB,IAAM,GAAK,IAAMA,IAG7D,OACI,uCACI,yBAAOxK,UAAU,sBAAjB,UACI,wBAAOA,UAAU,aAAjB,SACI,gCACI,oCACA,wEACA,iEACA,oFACA,2DACA,iEACA,gGACA,uGAGR,iCACKjB,EAASxB,KAAI,SAAC7B,EAAMkO,GAAP,OAAiB,eAAC,GAAD,CAE3BlO,KAAMA,EACNgE,GAAI,CAACgM,cAAenB,EAAekB,iBAAkBrB,GACrDR,MAAOA,EACP7C,KAAMF,GAJDnL,EAAK+D,aAQtB,oBAAG0E,GAAG,UAAUnE,UAAU,kCACtBD,MAAO4C,EAAO8H,OACdxK,QAAS,kBAAMqK,GAAiBL,MAGnCA,EACG,sBAAKjK,UAAU,kBAAkBC,QAASoK,EAA1C,SACI,eAAC,GAAD,CAAgB3K,GAAI,CAACoJ,UAAWwB,EAAiBvB,gBAExDwE,EACG,sBAAKvN,UAAU,kBAAkBC,QAASoK,EAA1C,SACI,eAAC,GAAD,CAAgB3O,KAAM6R,EAAY7N,GAAI,CAACoJ,UAAWyB,EAAexB,gBAC9D,OCiFRyE,GA5HE,SAAC,GAAa,IAAZ1F,EAAW,EAAXA,MAAW,EAEajH,mBAASiH,GAFtB,mBAEpB8C,EAFoB,KAEN6C,EAFM,OAGO5M,mBAAS,IAHhB,mBAGpBmJ,EAHoB,KAGT0D,EAHS,OAIW7M,mBAAS,GAJpB,mBAIpBgG,EAJoB,KAIPC,EAJO,OAKCjG,mBAAS,OALV,mBAKpBkH,EALoB,KAKZ8C,EALY,OAMGhK,mBAAS,GANZ,mBAMpBmH,EANoB,KAMX8C,EANW,OAOSjK,mBAAS,GAPlB,mBAOpB8M,EAPoB,KAORC,EAPQ,OAQS/M,mBAAS,IARlB,mBAQpB+F,EARoB,KAQRiH,EARQ,OASWhN,mBAAS,IATpB,mBASpBiN,EAToB,KASPC,EATO,OAUKlN,oBAAS,GAVd,mBAUpBkI,EAVoB,KAUViF,EAVU,OAWWnN,mBAAS,IAXpB,mBAWpBuH,EAXoB,KAWP6F,EAXO,OAYGpN,oBAAS,GAZZ,mBAYpB7D,EAZoB,KAYXkR,EAZW,OAaarN,oBAAS,GAbtB,mBAapBsN,EAboB,KAaNC,GAbM,QAcavN,oBAAS,GAdtB,qBAcpBoJ,GAdoB,MAcNK,GAdM,SAeSzJ,mBAAS,MAflB,qBAepBsJ,GAfoB,MAeRI,GAfQ,MAiB1BhH,qBAAU,WACN,IAAI1J,EAAMwU,EAAOC,EAAQ,GACzB,sBAAC,8BAAAnV,EAAA,yDACG+U,GAAW,GACP9F,EAFP,iCAGqBP,GAAa+C,EAAc7C,EAAQC,EAAuB,GAAdnB,EAAkBiH,GAHnF,cAGOjU,EAHP,gBAIqByO,GAASsC,GAJ9B,OAIOyD,EAJP,gDAMqBlG,GAAYyC,EAAc7C,EAAQC,EAAuB,GAAdnB,EAAkBiH,EAAa1F,GAN/F,eAMOvO,EANP,iBAOqBwO,GAAeuC,EAAcxC,GAPlD,QAOOiG,EAPP,eAYG,IAHAH,GAAW,GACXC,GAAgBJ,EAAeM,GAC3BzH,EAAcuH,EAA+C,EAAhCI,KAAKC,KAAKH,EAAQP,GAC3CW,EAAI,EAAGA,GAAK7H,EAAY6H,IAAKH,EAAMI,KAAKD,GAChDf,EAAa,gBAAE9C,EAAe/Q,IAC9B+T,EAAcS,GACdR,EAAcS,GAfjB,2CAAD,KAiBD,CAAC1D,EAAc7C,EAAQC,EAASnB,EAAaiH,EAAaK,EAAcpF,EAAUX,IAErF7E,qBAAU,WACNkK,EAAgB3F,GAChBhB,EAAe,KAChB,CAACgB,IAEJvE,qBAAU,kBAAMuD,EAAe,KAAI,CAACsB,IAEpC,IAYMgC,GAAgB,uCAAG,WAAOzB,GAAP,eAAAxP,EAAA,yDACjBiG,EAAwB,UAAjBwL,EAA2B,iCAAU,2BAC5CxQ,OAAOuU,QAAP,6KAAmDvP,EAAnD,MAFiB,0EAIXwJ,GAAWgC,EAAcjC,GAJd,OAKjBI,GAAS,SAAAQ,GAAG,OAAKA,KACjBvO,YAAM,SAAD,OAAKoE,EAAL,mEANY,kDAONpE,IAAMC,MAAM,yJAPN,kEAAH,sDAUhBoP,GAAkB,SAAC,GAAuB,IAAdlJ,EAAa,EAArB4C,OACnB7C,GAAkBC,EAAS,UAC3B8I,GAAcK,IAAgB,GACzBH,IAAYI,GAAc,QAGtC,OACI,uBAAKxK,MAAO,CAAC6O,cAAe,SAA5B,UACI,eAAC,GAAD,CACIlP,GAAI,CAACmL,YAAWC,aAAYC,QA/BxB,WACZ8C,EAAc,IACd/G,EAAe,GACfsH,IAAgB,SAAAxE,GAAK,OAAKA,KAC1BmE,EAAeJ,IA2B8B3C,UAxB/B,SAACzF,GACf6I,IAAgB,SAAAxE,GAAK,OAAKA,KAC1BmE,EAAexI,KAuBPqF,aAAcA,IAGlB,uBAAK5K,UAAU,mDAAf,UACI,sBAAIA,UAAU,wBAAd,sCACS,uBAAMA,UAAU,YAAhB,SAA6B6G,EAAc,IADpD,IAC+D,IAD/D,4BAES,uBAAM7G,UAAU,YAAhB,SAA6B4G,EAAW1K,YAEjD,wBAAM8D,UAAU,wGAAhB,UACI,oBAAGA,UAAU,qBAAqB6O,cAAY,SAC9C,wBAAO1K,GAAG,SAASnE,UAAU,yCAAyC3C,KAAK,OAAO4H,YAAY,qBAC1F6J,aAAW,SAASrJ,SAAU,gBAAWF,EAAX,EAAExB,OAASwB,MAAX,OAAuB0I,EAAe1I,YAIhF,sBAAKvF,UAAU,kBAAf,SACsB,UAAjB4K,GAA4BZ,EAAUY,GAAgB,eAAC,GAAD,CACnDZ,UAAWA,EAAUY,GACrB/D,YAAaA,EACbsD,WAAYA,GACZF,aAAcA,GACdvK,GAAI,CAACqJ,SAAUiF,EAAa5D,oBAAkBC,mBAAiBC,mBAAiBC,oBAEnE,UAAjBK,GAA4BZ,EAAUY,GAAgB,eAAC,GAAD,CAClDZ,UAAWA,EAAUY,GACrB/D,YAAaA,EACbsD,WAAYA,GACZF,aAAcA,GACdvK,GAAI,CAACqJ,SAAUiF,EAAa5D,oBAAkBC,mBAAiBC,mBAAiBC,oBAChF,KAGP3D,EAAW1K,OAAS,GAAK,eAAC,GAAD,CACtB0K,WAAYA,EACZC,YAAaA,EACbC,eAAgBA,IAEnB9J,GACG,uBAAKmH,GAAG,UAAUnE,UAAU,mDAA5B,UACI,oBAAGA,UAAU,+BACb,qEC7GL+O,GAjBC,SAAC,GAA8E,IAAD,IAA5ErT,KAAO1C,EAAqE,EAArEA,KAAM2S,EAA+D,EAA/DA,YAAarM,EAAkD,EAAlDA,MAAOG,EAA2C,EAA3CA,IAA2C,IAArCC,GAAKI,EAAgC,EAAhCA,SAAUc,EAAsB,EAAtBA,gBACpE,OACI,sBAAKZ,UAAU,eAAf,SACI,uBAAKA,UAAU,gBAAf,UACI,sBAAKA,UAAU,uCACXD,MAAO,CAACkB,WAAY,8CACpBZ,OAAQrH,EACRiH,QAASH,IACb,qBAAIE,UAAU,6BAAd,SAA4ChH,IAC5C,qBAAIgH,UAAU,gCAAd,SAA+C2L,IAC/C,sBAAI3L,UAAU,6BAAd,UAA4CV,EAAMgB,WAAWC,QAAQ,2BAA4B,OAAjG,aACA,oBAAGP,UAAU,+BAA+BC,QAAS,kBAAMW,EAAgBnB,EAAKH,YCsEjF0C,iBAHS,SAAC7E,GAAD,MAAY,CAACuB,MAAOvB,EAAM4B,SAASL,MAAO5C,KAAMqB,EAAMrB,KAAKA,SACxD,SAACM,GAAD,MAAe,CAACC,SAAU,SAACgB,EAAM3B,GAAP,OAAgBU,EAASC,EAASgB,EAAM3B,QAE9EsG,EAzEE,SAAC,GAA6B,IAA5BtD,EAA2B,EAA3BA,MAAO5C,EAAoB,EAApBA,KAAMO,EAAc,EAAdA,SAAc,EAElBwE,mBAAS,MAFS,mBAEnCnF,EAFmC,KAE7B8G,EAF6B,OAGV3B,mBAASnC,GAHC,mBAGnCK,EAHmC,KAGzBqD,EAHyB,OAIFvB,mBAAS,IAJP,mBAInCmO,EAJmC,KAIrBC,EAJqB,OAKJpO,mBAAS,IALL,mBAKnCuH,EALmC,KAKtB6F,EALsB,KAO1C1K,qBAAU,WAEN,OADmBxH,GAAMyH,WAAU,kBAAMpB,EAAYrG,GAAMC,WAAW+C,SAASL,YAEhF,IAEH6E,qBAAU,kBAAM2L,MAAU,CAAC9G,IAC3B7E,qBAAU,kBAAM0L,EAAgBlQ,KAAW,CAACA,IAE5C,IAAM6B,EAAe,uCAAG,WAAO/E,EAASyD,GAAhB,qCAAAnG,EAAA,yDAAuBqG,EAAvB,+BAAgC,IAChDgF,EAAe1I,EAAKG,MAAMH,EAAKG,MAAM0H,WAAU,SAAAvE,GAAI,OAAIA,EAAKvD,UAAYA,OADxD,wBAGVA,EAAoB2I,EAApB3I,QAAS0D,EAAWiF,EAAXjF,SACX7D,EAAO,CAACG,UAAS2D,OAAQgF,EAAahF,OAAQD,YAC7CC,QAAUA,EACf9D,EAAK6D,QAAUD,EAAQkF,EAAahF,OANpB,SAOVnD,EAASI,EAAef,GAPd,OAQhBoI,EAAc,wCARE,+BAUZpI,EAAO,CAAEG,UAAS2D,SAAQD,QAASD,EAAQE,GAV/B,UAWVnD,EAASC,EAAaZ,GAXZ,QAYhBoI,EAAc,wCAZE,4CAAH,wDAgBfA,EAAgB,SAACD,GACP9H,GAAMC,WAAWF,KAAKb,MAE7BD,IAAMC,MAAM,yJADND,YAAM,kCAAD,OAAU6I,EAAV,2CAMd/D,EAAW,SAAC,GAA0D,IAAhBrC,EAAe,EAAxDsG,OAAQE,WAAa5D,OAAS6D,UACzCxI,EAAOqD,EAASvB,QAAO,SAAA9B,GAAI,OAAIA,EAAK1C,OAASyE,KACjD+E,EAAO,WAAP,cAAW9G,KAGTwT,EAAS,kBAAMD,EAAgBlQ,EAASvB,QAAO,SAAA9B,GAAI,OACrDA,EAAK1C,KAAKmW,cAAc7N,SAAS8G,EAAY+G,gBAC7CzT,EAAKiQ,YAAYwD,cAAc7N,SAAS8G,EAAY+G,oBAExD,OACI,uBAAKnP,UAAU,oCAAf,UACI,wBAAMmE,GAAG,OAAOnE,UAAU,2FAA1B,UACI,oBAAGmE,GAAG,WAAWnE,UAAU,qBAAqB6O,cAAY,SAC5D,wBAAO1K,GAAG,SAASnE,UAAU,yCAAyC3C,KAAK,OAAO4H,YAAY,qBAC1F6J,aAAW,SAASrJ,SAAU,gBAAWF,EAAX,EAAExB,OAASwB,MAAX,OAAuB0I,EAAe1I,SAE5E,sBAAKpB,GAAG,SAASnE,UAAU,MAA3B,SACMgP,EAAa9S,OAAS8S,EAAazR,KAAI,SAAC7B,GAAD,OAAU,eAAC,GAAD,CAAwBA,KAAMA,EAAMgE,GAAI,CAACI,WAAUc,oBAArClF,EAAK+D,QAAqD2I,EAAYlM,OAAQ,sBAAK8D,UAAU,oEAAf,SAC3I,8BAAK,kOAER,KAEJtE,GACG,sBAAKsE,UAAU,iDAAf,SACI,eAAC,GAAD,CAAatE,KAAMA,EAAMgE,GAAI,CAACiB,SA1B7B,kBAAM6B,EAAQ,OA0ByB5B,6BC3D7CwO,GAPC,mDACTlS,GACAyB,GACA0Q,GAHS,IAIZtT,WCEWuT,GARQ,SAAC,GAAoC,IAAxBC,EAAuB,EAAlCC,UAAuB1H,EAAW,EAAXA,MAE5C,OADA5O,IACO,eAAC,KAAD,CAAOuW,OAAQ,SAACC,GACnB,OAAInW,IACQ,eAACgW,EAAD,2BAAgBG,GAAhB,IAAuB5H,MAAOA,KADf,eAAC,KAAD,CAAUvD,GAAI,CAACP,SAAU,IAAK7G,MAAO,CAACwS,KAAMD,EAAMrV,iBCuFtE2H,iBAHS,SAAC,GAAD,MAAgB,CAAChD,QAAjB,EAAEA,YACC,SAAC5C,GAAD,MAAe,CAACmC,eAAgB,SAAClB,EAAMF,GAAP,OAAiBf,EAASmC,GAAelB,EAAMF,QAE3F6E,EAnFA,SAAC,GAAsB,IAArBzD,EAAoB,EAApBA,eAAoB,EAEIsC,mBAAS,IAFb,mBAE3BqE,EAF2B,KAEdG,EAFc,KAI3B5C,EAAUC,eAsBVuD,EAAQ,uCAAG,WAAMT,GAAN,iBAAArM,EAAA,6DACTM,EAAO,CAAET,KAAMwM,EAAOxM,KAAMe,MAAOyL,EAAOzL,MAAOC,KAAMwL,EAAOU,UADrD,kBAGY1M,EAAWC,GAHvB,cAGLmW,EAHK,gB9B/BMC,E8BmCED,EAASnQ,I9BnCCrG,EAAKM,KAAKJ,IAAS,aAAc,CAACuW,YAAUC,OAAM,SAAAhV,GAAG,OAAIqL,QAAQC,IAAItL,M8B+BvF,OAMTE,YAAM,GAAD,OAAIvB,EAAKT,KAAT,iIACLyJ,EAAQlC,QAAQ,QAEhBhC,EAAeL,GAAazE,GAC5B8E,EAAeR,IAAa,GAVnB,kDAWEoI,QAAQC,IAAR,MAXF,kC9B/BK,IAACyJ,I8B+BN,qBAAH,sDAcRzK,EAASiB,aAAU,CACrBC,cAAe,CACXtN,KAAM,GACNe,MAAO,GACPmM,SAAU,GACV6J,WAAY,IAEhBxJ,SAzCa,SAAAf,GACb,IAAMQ,EAAS,GAgBf,OAdIR,EAAOxM,KACHwM,EAAOxM,KAAKkD,OAAS,EAAG8J,EAAOhN,KAAO,mLACtCwM,EAAOxM,KAAKkD,OAAS,MAAK8J,EAAOhN,KAAO,iMAF/BgN,EAAOhN,KAAO,gDAI3BwM,EAAOzL,MACF,4CAA4CyM,KAAKhB,EAAOzL,SAAQiM,EAAOjM,MAAQ,gFADtEiM,EAAOjM,MAAQ,gDAG7ByL,EAAOU,SACHV,EAAOU,SAAShK,OAAS,EAAG8J,EAAOE,SAAW,2MAC9CV,EAAOU,SAAShK,OAAS,MAAK8J,EAAOE,SAAW,mNAFnCF,EAAOE,SAAW,gDAInCV,EAAOuK,WACHvK,EAAOuK,aAAevK,EAAOU,WAAUF,EAAO+J,WAAa,sKAD5C/J,EAAO+J,WAAa,gDAGpC/J,GAyBPC,aAGJ,OACI,sBAAKjG,UAAU,iBAAf,SACI,wBAAMA,UAAU,yCAAyCiG,SAAUb,EAAOsB,aAA1E,UACI,wBAAO1G,UAAU,+BAA+BwJ,QAAQ,OAAxD,yDACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,OAAQ2H,MAAO,OAAQC,YAAa,8CAAYC,eAClEC,QAAS,CAACC,SAAQC,oBAEtB,wBAAOrF,UAAU,+BAA+BwJ,QAAQ,QAAxD,qEACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,QAAS2H,MAAO,QAASC,YAAa,0DAAcC,eACtEC,QAAS,CAACC,SAAQC,oBAEtB,wBAAOrF,UAAU,+BAA+BwJ,QAAQ,WAAxD,4CACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,WAAY2H,MAAO,WAAYC,YAAa,iCAASC,eACvEC,QAAS,CAACC,SAAQC,oBAEtB,wBAAOrF,UAAU,+BAA+BwJ,QAAQ,aAAxD,2EACA,eAAC,GAAD,CACIzE,UAAW,CAAC1H,KAAM,WAAY2H,MAAO,aAAcC,YAAa,gEAAeC,eAC/EC,QAAS,CAACC,SAAQC,oBAEtB,yBAAQhI,KAAK,SAAS2C,UAAU,8BAAhC,oDCjERpB,GAAkGwQ,GAAlGxQ,YAAalB,GAAqF0R,GAArF1R,QAASa,GAA4E6Q,GAA5E7Q,eAAgBxC,GAA4DqT,GAA5DrT,MAAO+B,GAAqDsR,GAArDtR,WAAYC,GAAyCqR,GAAzCrR,YAAaC,GAA4BoR,GAA5BpR,WAAYC,GAAgBmR,GAAhBnR,YAuD3E+R,OArDf,WAAgB,IAAD,EAEiBnP,mBAAS,IAF1B,mBAEN7B,EAFM,KAEGiR,EAFH,KAIb1M,qBAAU,WAQR,OAPA,sBAAC,sBAAApK,EAAA,sEACO4C,GAAMK,SAASwC,MADtB,eAEC7F,KAFD,qCAE2BgD,GAAMK,SAASsB,MAF1C,0CAAD,GAIA3E,KAAoBgD,GAAMK,SAASmC,GAAeP,GAAYjF,IAAiBC,OAC/E+C,GAAMK,SAASmC,GAAeN,GAAa1E,MACtBwC,GAAMyH,WAAU,kBAAMyM,EAAWlU,GAAMC,WAAWgD,cAEtE,IAEH,IAAMkR,EAAe,sBAAKlQ,UAAU,uBAAf,SACnB,sBAAKA,UAAU,2DAAf,SAA0E,iEAa5E,OACE,uBAAKA,UAAU,MAAMC,QAXE,SAAC,GAAuB,IAAdkB,EAAa,EAArB4C,OACzB,GAAG/E,EAAQlD,KACL,CAAC,OAAQ,cAAe,OAAQ,iBAAiB0B,QAAO,SAAAwC,GAAS,OAAIkB,GAAkBC,EAASnB,MAAY9D,QAC9GH,GAAMK,SAASmC,GAAeT,IAAY,QACvC,KAAGkB,EAAQlF,MAGX,OAFD,CAAC,UAAW,SAAS0D,QAAO,SAAAwC,GAAS,OAAIkB,GAAkBC,EAASnB,MAAY9D,QAClFH,GAAMK,SAASmC,GAAeR,IAAa,MAKCgC,MAAO,CAACsM,UAAW,QAAS8D,SAAU,YAAtF,UACE,eAAC,IAAD,IACA,gBAAC,KAAD,CAAUpU,MAAOA,GAAjB,UACE,kCAAQ,eAAC,GAAD,MACPiD,EAAQlD,MAAQ,eAAC,GAAD,IAChBkD,EAAQlF,OAAS,eAAC,GAAD,IAClB,gBAAC,KAAD,WACE,eAAC,KAAD,CAAOsW,KAAK,QAAQC,OAAK,EAACb,UAAWhX,IACrC,eAAC,KAAD,CAAO4X,KAAK,YAAYC,OAAK,EAACb,UAAWc,KACzC,eAAC,KAAD,CAAOF,KAAK,WAAWC,OAAK,EAACb,UAAWe,KACxC,eAAC,KAAD,CAAOH,KAAK,kBAAkBX,OAAQ,kBAAMS,KAC5C,eAAC,GAAD,CAAgBE,KAAK,eAAeC,OAAK,EAACb,UAAWhC,GAAU1F,MAAO,UACtE,eAAC,GAAD,CAAgBsI,KAAK,eAAeC,OAAK,EAACb,UAAWhC,GAAU1F,MAAO,UACtE,eAAC,KAAD,CAAOsI,KAAK,SAASC,OAAK,EAA1B,SAA2B,eAAC,KAAD,CAAU9L,GAAG,mBACxC,eAAC,KAAD,CAAO6L,KAAK,IAAIC,OAAK,EAArB,SAAsB,eAAC,KAAD,CAAU9L,GAAG,YACnC,eAAC,KAAD,CAAUA,GAAG,uBAEf,eAAC,GAAD,WCxDOiM,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB/W,MAAK,YAAkD,IAA/CgX,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,kBCGdO,IAASvB,OACP,eAAC,IAAMwB,WAAP,UACE,eAAC,KAAD,UACE,eAAC,GAAD,QAGJ5J,SAAS6J,eAAe,SAM1BV,M","file":"static/js/main.927ba83e.chunk.js","sourcesContent":["const Home = () => {\n    return(null);\n}\n\nexport default Home;","import http from './http';\nimport {apiUrl} from '../config.json';\nimport { saveCartToDbOnLogin } from './cartService';\n\nconst TOKEN_KEY = 'token', ROLE = 'role', NAME = 'name';\n\nexport const getJwt = () => localStorage.getItem(TOKEN_KEY);\n\nexport const getCurrentUser = () => localStorage[TOKEN_KEY] ? ({ name: localStorage[NAME], role: localStorage[ROLE] }): null;\n\nexport const checkAdminToken = async () => {\n    try {\n        await http.get(apiUrl + '/users/checkAdmin');\n        localStorage[ROLE] = 'admin';\n    } catch(err) { delete localStorage[ROLE] }\n}\n\nexport const checkIfAdmin = () => localStorage[ROLE] === 'admin';\n\nexport const userSignUp = (user) => http.post(apiUrl + '/users/signUp', user).then(resp => resp.data);\n\nexport const login = async(email, pass) => {\n    let { data } = await http.post(apiUrl + '/users/login', { email, pass });\n    localStorage.setItem(TOKEN_KEY, data.token);\n    localStorage.setItem(NAME, data.name);\n    localStorage.setItem(ROLE, data.role);\n    saveCartToDbOnLogin();\n    window.location.reload();\n}\n\nexport const logout = () => {\n    localStorage.removeItem(TOKEN_KEY);\n    localStorage.removeItem(NAME);\n    localStorage.removeItem(ROLE);\n    window.location.reload();\n};","import axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { getJwt } from './usersService';\n\naxios.defaults.headers.common['x-auth-token'] = getJwt();\nexport const setTokenHeaders = () => axios.defaults.headers.common['x-auth-token'] = getJwt();\n\naxios.interceptors.response.use(null, err => {\n    if(err.response && err.response.status === 409) toast.error('המשתמש כבר קיים במערכת');\n    else if(err.response && err.response.status >= 403) toast.error('אירעה שגיאה בלתי צפויה');\n    else if(err.response && err.response.data.message === 'invalid user or password') toast.error('שם המשתמש או הסיסמא שהוזנו שגויים');\n    return Promise.reject(err);\n})\n\nconst requests = {\n    get:    axios.get,\n    post:   axios.post,\n    put:    axios.put,\n    patch:  axios.patch,\n    delete: axios.delete,\n}\n\nexport default requests;","import http, { setTokenHeaders } from \"./http\";\nimport { apiUrl } from \"../config.json\";\nimport store from \"../redux-store/redux-store\";\nimport { ADD_TO_CART, editCart } from \"../redux-store/cart-reducer\";\n\nexport const createCart = (user_id) => http.post(apiUrl + '/carts/add', {user_id}).catch(err => console.dir(err));\n\nexport const getUserCart = () => http.get(apiUrl + '/carts/get').then(resp => resp.data);\n\nexport const addToCart = (prod) => http.put(apiUrl + '/carts/addItem', prod);\n\nexport const changeItemAmount = (prod) => http.put(apiUrl + '/carts/changeItem', prod);\n\nexport const removeFromCart = (prod_id) => http.put(apiUrl + '/carts/removeItem', {prod_id});\n\nexport const saveCartToDbOnLogin = () => {\n    let cart = store.getState().cart.cart.items;\n    if(!cart.length) return;\n    setTokenHeaders();\n    cart.forEach(prod => store.dispatch(editCart(ADD_TO_CART, prod)));\n}\n\n","import { addToCart, changeItemAmount, getUserCart, removeFromCart } from \"../services/cartService\";\nimport { getCurrentUser } from \"../services/usersService\";\n\nexport const\n    GET_CART         = 'GET_CART', \n    EDIT_CART        = 'EDIT_CART', \n    ADD_TO_CART      = 'ADD_TO_CART', \n    CHANGE_AMOUNT    = 'CHANGE_AMOUNT', \n    REMOVE_FROM_CART = 'REMOVE_FROM_CART', \n    SELECT           = 'SELECT', \n    SELECT_ALL       = 'SELECT_ALL', \n    UNSELECT_ALL     = 'UNSELECT_ALL',\n    REMOVE_SELECTED  = 'REMOVE_SELECTED';\n\nconst initCartState = {loading: false, error: '', cart: {items: []}, selectedItems: []};\n\nexport const cartReducer = (state = initCartState, action) => {\n    switch(action.type) {\n        case GET_CART: return { ...state, ...action.payload};\n        case EDIT_CART: return { ...state, ...action.payload};\n        case ADD_TO_CART: return { ...state, cart: { items: [...state.cart.items, action.prod] } };\n        case CHANGE_AMOUNT: return {...state,cart:{items:state.cart.items.map(prod=>prod.prod_id===action.prod.prod_id?action.prod:prod)}};\n        case REMOVE_FROM_CART: return { ...state, cart: {items: state.cart.items.filter(prod => prod.prod_id !== action.prod)}};\n        case SELECT: return { ...state, selectedItems: [...state.selectedItems, action.prodId] };\n        case SELECT_ALL: return { ...state, selectedItems: action.selectedItems };\n        case UNSELECT_ALL: return { ...state, selectedItems: action.selectedItems };\n        case REMOVE_SELECTED: return { ...state, selectedItems: state.selectedItems.filter(prod => prod !== action.prodId) };\n        default: return state;\n    }  \n}\n\nexport const getCart = () => {\n    let payload, type = GET_CART;\n    return async (dispatch) => {  \n        payload = {loading: true, error: ''};\n        dispatch({type, payload});\n        try {\n            let cart = await getUserCart();\n            payload = {loading: false, cart, error: ''};\n            dispatch({type, payload});\n        } catch(error) {\n            payload = {loading: false, cart: [], error: error};\n            dispatch({type, payload});\n        }\n    }\n}\n\nexport const editCart = (type, prod) => {\n    let payload;\n    if(!getCurrentUser()) return (dispatch) => dispatch({type, prod});\n    return async (dispatch) => { \n        payload = {loading: true, error: ''};\n        dispatch({type: EDIT_CART, payload});\n        try {\n            await (getAction(type)(prod));\n            dispatch({type, prod});\n        } catch(error) {\n            payload = {loading: false, error: error};\n            dispatch({type: EDIT_CART, payload});\n        }\n    }\n}\n\nconst getAction = (type) => {\n    switch(type) {\n        case ADD_TO_CART: return addToCart;\n        case CHANGE_AMOUNT: return changeItemAmount;\n        case REMOVE_FROM_CART: return removeFromCart;\n        default: return;\n    }\n}\n\nexport const selectHandler = (type, prodId) => ({type, prodId});\n\nexport const selectAllHandler = (type, selectedItems) => ({type, selectedItems});","export const \n    CART_INDEX  = 'CART_INDEX', \n    LOGIN_INDEX = 'LOGIN_INDEX', \n    USER_INDEX  = 'USER_INDEX', \n    ADMIN_INDEX = 'ADMIN_INDEX', \n    SIGNUP_DATA = 'SIGNUP_DATA';\n\n// login index is for sign in card to show or hide, not for user is loged in\nconst initIndexesState = { cart: false, login: false, user: '', admin: false, signupData: {email: '', pass: ''} };\n\nexport const indexesRrducer = (state = initIndexesState, action) => {\n    switch(action.type) {\n        case CART_INDEX:  return { ...state, cart:  action.state };\n        case LOGIN_INDEX: return { ...state, login: action.state };\n        case USER_INDEX:  return { ...state, user:  action.state };\n        case ADMIN_INDEX: return { ...state, admin: action.state };\n        case SIGNUP_DATA: return { ...state, signupData: action.state };\n        default: return state\n    }\n}\n\nexport const indexesManager = (type, state) => ({type, state})","import { getAllProducts } from \"../services/productsService\";\n\nexport const GET_PRODS = 'GET_PRODS';\n\nconst initProdsState = {loading: false, error: '', prods:[]};\n\nexport const prodsReducer = (state = initProdsState, action) => {\n    switch(action.type) {\n        case GET_PRODS: return { ...state, ...action.payload };\n        default: return state;\n    }\n}\n\nexport const getProducts = () => {\n    let payload, type = GET_PRODS;\n    return async (dispatch) => {  \n        payload = {loading: true, error: ''};\n        dispatch({type, payload});\n        try {\n            let prods = await getAllProducts();\n            payload = {loading: false, prods, error: ''};\n            dispatch({type, payload});\n        } catch(error) {\n            payload = {loading: false, error: error};\n            dispatch({type, payload});\n        }\n    }\n}","import http from \"./http\";\nimport { apiUrl } from \"../config.json\";\n\nexport const getAllProducts = () => http.get(apiUrl + '/prods/all').then(resp => resp.data);","import { createStore, combineReducers, applyMiddleware } from \"redux\";\nimport thunkMiddleware from 'redux-thunk'\nimport { cartReducer } from \"./cart-reducer\";\nimport { indexesRrducer } from \"./indexes-reduser\";\nimport { prodsReducer } from \"./products-reducer\";\n\nconst store = createStore(\n    combineReducers({\n        products: prodsReducer, \n        cart:     cartReducer, \n        indexes:  indexesRrducer\n    }), applyMiddleware(thunkMiddleware));\n\nexport default store;\n","const CartItem = ({\n    item: {name, image, price, payment, amount, _id: prodId}, \n    fn: {handelChangeAmount, handelRemoveFromCart, handleSelectItem, showProd},\n    style\n}) => {\n    return(\n        <div className=\"col-12 cart-item\">\n            <div className=\"m-1 p-3 shadow cart-item-body\" style={style} onClick={(e) => handleSelectItem(e, prodId)}>\n                <img className=\"float-left w-25 pb-1 cart-img\" src={image} alt=\"Vitamin\" prodid={name} onClick={showProd}/>\n                <div className=\"w-75 pl-4\">\n                    <i className=\"fas fa-trash-alt float-right\" onClick={() => handelRemoveFromCart(prodId)}></i>\n                    <h6 className=\"text-success\">{name} \n                        <small className=\"text-info\"> ₪{price.toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1,\")}</small>\n                    </h6>\n                    <h6 className=\"text-info\">\n                        <span>\n                            {payment.toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1,\")} \n                        </span> ₪\n                    </h6>\n                    <div className=\"amount float-right\">\n                        <div className=\"increace\" onClick={() => handelChangeAmount(prodId, 1)}>+</div>\n                        <div className=\"text-center\">{amount}</div>\n                        <div className=\"reduce\" onClick={() => handelChangeAmount(prodId, -1)}>-</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default CartItem;","import { useState } from \"react\";\n\nconst ProdDetails = ({prod: {name, dscription, more_info, price, image, _id}, fn: {hideProd, handleAddToCart}}) => {\n\n    const[amount, setAmount] = useState(1);\n\n    const changeAmount = (pointer) => {\n        if(amount + pointer > 99 || amount + pointer < 1) return;\n        setAmount(amount => amount + pointer);\n    }\n\n    return (\n        <div className=\"container bg-light p-0\">\n            <h1 className=\"close font-weight-bold text-danger\" onClick={hideProd}>&#x2715;</h1>\n            <div className=\"img-container w-50 h-100 float-left\"\n                style={{background: `url(${image})no-repeat center`}}></div>\n            <div className=\"content pl-5 pr-5 pb-5 float-right w-50\">\n                <h3 className=\"text-center text-success pt-5\">{name}</h3>\n                <h5 className=\"mt-2 text-center text-info\">{dscription}</h5>\n                <p className=\"text-justify pt-3\">{more_info}</p>\n                <div className=\"bottom\">\n                    <div className=\"amount\">\n                        <div className=\"increace plus\" onClick={() => changeAmount(1)}>+</div>\n                        <div className=\"text-center current-amount\">{amount}</div>\n                        <div className=\"reduce minus\" onClick={() => changeAmount(-1)}>-</div>\n                    </div>\n                    <h5 className=\"mt-2 text-center text-success original-price\">{price} ₪</h5>\n                    {amount > 1 && <span className=\"text-info prod-final-price\">\n                        סך הכל {(price * amount).toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1,\")} ₪\n                    </span>}      \n                    <i className=\"fas fa-cart-plus shadow add-to-cart-2\" onClick={() => handleAddToCart(_id, price, amount) || hideProd()}></i>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ProdDetails;","export const checkParentsClass = (element, classname) => {\n    if(element.className.split(' ').includes(classname)) return true;\n    if(element.parentNode.className) return checkParentsClass(element.parentNode, classname);\n    else return false;\n}\n\nexport const getDateFormated = (date) => {\n    date = new Date(date);\n    let month = date.getMonth() + 1;\n    let day = date.getDate();\n    if(month.toString().length < 2) month = '0' + month;\n    if(day.toString().length < 2)   day   = '0' + day;\n    return `${day}-${month}-${date.getFullYear()}`;\n}","import store from \"../../redux-store/redux-store\";\nimport CartItem from \"./cartItem\";\nimport ProdDetails from \"../products/prodDetails\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport { checkParentsClass } from \"../../services/generalFn\";\nimport { useEffect, useState } from \"react\";\nimport { CART_INDEX, indexesManager } from \"../../redux-store/indexes-reduser\";\nimport { ADD_TO_CART, CHANGE_AMOUNT, UNSELECT_ALL, REMOVE_FROM_CART, REMOVE_SELECTED, SELECT, SELECT_ALL, selectAllHandler, selectHandler, editCart } from \"../../redux-store/cart-reducer\";\n\nconst Cart = ({cart: _cart, prods, selectedItems: _selectedItems, editCart, selectHandler, selectAllHandler}) => {\n\n    const[cart, setCart] = useState(_cart);\n    const[products, setProducts] = useState(prods);\n    const[cartProds, setCartProds] = useState([]);\n    const[selectedItems, setSelectedItems] = useState(_selectedItems);\n    const[prod, setProd] = useState(null);\n    const history = useHistory();\n\n    const styles = {\n        selectedItem: { backgroundColor: 'white', border: '3px solid rgb(15, 177, 15)' },\n        notSelectedItem: { backgroundColor: 'rgb(240, 240, 240)', border: 'none' },\n        emptyCart: {fontSize: '5rem', margin: '20px 10px', display: 'inline-block', color: 'white', textShadow: '0 0 4px gray'},\n        emptyCartText: {display: 'inline-block', margin: '20px 10px'}\n    }\n\n    useEffect(() => {\n        const subscription = store.subscribe(() => {\n            const {products: {prods}, cart: {cart, selectedItems}} = store.getState();\n            setCart(cart) || setSelectedItems(selectedItems) || setProducts(prods);\n        });\n        return subscription;\n    }, []);\n\n    useEffect(() => setCartProdsData(), [cart]);\n    \n    const setCartProdsData = () => {\n        if(!cart.items) return;\n        setCartProds(cart.items.map(item => {\n            for(let prod of products) {\n                if(prod._id !== item.prod_id) continue;\n                let {amount, payment} = item;\n                return {...prod, amount, payment};\n            }\n        }).reverse());\n    }\n\n    const handleAddToCart = (prod_id, price, amount = 1) => {\n        let isProdInCart = cart.items[cart.items.findIndex(item => item.prod_id === prod_id)];\n        if(isProdInCart) return handelChangeAmount(prod_id, amount)\n        let prod = { prod_id, amount, payment: price * amount};\n        updateCart(ADD_TO_CART, prod, 'התווסף');\n    }\n\n    const handelChangeAmount = (prodId, pointer) => {\n        let {prod_id, amount, payment} = cart.items[cart.items.findIndex(prod => prod.prod_id === prodId)];\n        let prod = {prod_id, amount, payment};\n        if(prod.amount + pointer > 99 || prod.amount + pointer < 1) return;\n        let price = products[products.findIndex(prod => prod._id === prodId)].price;\n        prod.amount += pointer;\n        prod.payment = price * prod.amount;\n        updateCart(CHANGE_AMOUNT, prod, 'התעדכן');\n    }\n\n    const handelRemoveFromCart = (prodId) => {\n        updateCart(REMOVE_FROM_CART, prodId, 'הוסר');\n        if(selectedItems.includes(prodId)) selectHandler(REMOVE_SELECTED, prodId);\n    }\n\n    const updateCart = async (type, payload, msg) => {\n        await editCart(type, payload);\n        toastMessages(msg);\n    }\n\n    const toastMessages = (msg) => {\n        let error = store.getState().cart.error;\n        if(!error) toast(`הפריט ${msg} בהצלחה`);\n        else toast.error('משהו השתבש נסה שוב מאוחר יותר');\n    }\n\n    const handleSelectItem = ({target: element} ,prodId) => {\n        if(checkParentsClass(element, 'float-right')) return;\n        if(element.className.includes('cart-img') && history.location.pathname === '/products') return;\n\n        if(!selectedItems.includes(prodId)) selectHandler(SELECT, prodId);\n        else selectHandler(REMOVE_SELECTED, prodId);\n    }\n\n    const handleSelectAll = () => {\n        if(selectedItems.length === cartProds.length) selectAllHandler(UNSELECT_ALL, []);\n        else selectAllHandler(SELECT_ALL, cartProds.map(prod => prod._id));\n    }\n\n    const removeSelectedFromCart = () => {\n        selectedItems.forEach(async prodId => await editCart(REMOVE_FROM_CART, prodId));\n        selectAllHandler(UNSELECT_ALL, []);\n    }\n\n    const calcFinalPayment = () => {\n        let finalPayment = 0;\n        cartProds.forEach(prod => selectedItems.includes(prod._id)? finalPayment += prod.payment: null);\n        return finalPayment;\n    }\n\n    const closeCart = () => store.dispatch(indexesManager(CART_INDEX, false))\n\n    const hideProd = () => setProd(null);\n\n    const showProd = ({target:{attributes: {prodid: {nodeValue: prodId}}}}) => {\n        if(history.location.pathname !== '/products') return;\n        let prod = products.filter(prod => prod.name === prodId);\n        setProd(...prod);\n    }\n\n    return (\n        <div className=\"cart\">\n            {cartProds.length? <>\n                <div className=\"cart-head cart-full p-2\">\n                    <div className=\"checkbox\">\n                        <div className=\"checkbox-border\" onClick={handleSelectAll}>\n                            {selectedItems.length === cartProds.length ? <div className=\"checkbox-body\"></div>:''}\n                        </div>\n                        <small className=\"checkbox-text mr-2\">\n                            {selectedItems.length === cartProds.length ? 'הסר סימון' : 'סמן את כל הפריטים'}\n                        </small>\n                    </div>\n                    {selectedItems.length? <div className=\"trash-box\">\n                        <small className=\"trash-text ml-2\"> הסר פריטים מסומנים </small>\n                        <i id=\"trash\" className=\"fas fa-trash-alt\" onClick={removeSelectedFromCart}></i>\n                    </div>: ''}\n                </div>\n\n                <div id=\"cart-items\" className=\"row\">\n                    {cartProds.length ?\n                    cartProds.map(item => <CartItem \n                        key={item._id} \n                        item={item} \n                        fn={{handelChangeAmount, handelRemoveFromCart, handleSelectItem, showProd}}\n                        style={selectedItems.includes(item._id)? styles.selectedItem: styles.notSelectedItem} \n                    />):''}\n                </div>\n\n                <div className=\"cart-footer pay-text\">\n                    <h6 className=\"text-right\">\n                        פריטים שנבחרו:  \n                        <span className=\"items-amount text-info\"> {selectedItems.length} </span>\n                        <br/>\n                        סך הכל לתשלום: \n                        <span className=\"final-price text-info\">  \n                            {' '}{calcFinalPayment().toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1,\")} ₪\n                        </span> \n                    </h6>\n                    <button id=\"buy-now\" className=\"btn btn-dark\" disabled={!selectedItems.length}>שלם עכשיו</button>\n                </div>\n            </>: \n            <>\n                <h6 style={styles.emptyCartText}><b>עגלת הקניות שלך ריקה</b></h6>\n                <i className=\"fas fa-shopping-cart\" style={styles.emptyCart}></i>\n            </>\n            }\n            <Link to=\"/products\" className=\"cart-empty btn btn-dark w-100\" onClick={closeCart}>המשך בקניות</Link>\n            {prod &&\n                <div className=\"dark justify-content-center align-items-center\">\n                    <ProdDetails prod={prod} fn={{hideProd, handleAddToCart}}/>\n                </div>\n            }\n        </div>\n    );\n}\n\nconst mapStateToProps = ({cart: {cart, selectedItems}, products: {prods}}) => ({prods, cart, selectedItems});\nconst mapDispatchToProps = (dispatch) => ({\n    editCart: (type, prod) => dispatch(editCart(type, prod)),\n    selectHandler: (type, prodId) => dispatch(selectHandler(type, prodId)),\n    selectAllHandler: (type, selectedItems) => dispatch(selectAllHandler(type, selectedItems))\n});\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);","const Footer = () => {\n    return(\n        <footer className=\"bg-dark\">\n\n        </footer>\n    );\n}\n\nexport default Footer;","import { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { CART_INDEX, indexesManager, LOGIN_INDEX } from \"../redux-store/indexes-reduser\";\n\nconst NavBar = ({indexes, cartItems, indexesManager}) => {\n\n    const history = useHistory();\n    const[url, setUrl] = useState(history.location.pathname);\n\n    useEffect(() => history.listen((location) => setUrl(location.pathname)) , [history]);\n\n    const togglCart = () => {\n        indexesManager(CART_INDEX, !indexes.cart);\n        indexes.login && indexesManager(LOGIN_INDEX, false);\n    };\n    const togglLogin = () => {\n        indexesManager(LOGIN_INDEX, !indexes.login);\n        indexes.cart &&  indexesManager(CART_INDEX, false);\n    };\n\n    return (\n        <nav className=\"navbar navbar-expand navbar-dark bg-dark shadows\">\n            <div className=\"container-fluid\">\n                <div className=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\">\n                    <div className=\"navbar-nav\">\n                        <NavLink to=\"/home\" className=\"nav-link\">בית</NavLink>\n                        <div className=\"nav-link\">אודותינו</div>\n                        <NavLink to=\"/products\" className=\"nav-link\">מוצרים</NavLink>\n                        <div className=\"nav-link\">צור קשר</div>\n                        {indexes.admin && <NavLink \n                            to=\"admin\" \n                            className=\"nav-link\"\n                            style={{'color': url.includes('admin') && 'white'}}\n                        >איזור ניהול</NavLink>}\n                    </div>\n                </div>\n                <span className={indexes.login? \"active navbar-nav connect ml-3\": \"navbar-nav connect ml-3\" } \n                    onClick={togglLogin}>\n                    <div className=\"nav-link\" id=\"login-text\">\n                        {indexes.user || 'התחבר'}\n                    </div>\n                    <i className=\"fas fa-user-circle\"></i>\n                </span>\n                <i className={indexes.cart? \"active fas fa-shopping-cart float-left\": \"fas fa-shopping-cart float-left\"} \n                    onClick={togglCart}>\n                    {cartItems ? <span className=\"items-count\">{cartItems}</span>:''}\n                </i>\n            </div>\n        </nav>\n    );\n}\n\nconst mapStateToProps = (state) => ({indexes: state.indexes, cartItems: state.cart.cart.items ? state.cart.cart.items.length : 0});\nconst mapDispatchToProps = (dispatch) => ({indexesManager: (type, state) => dispatch(indexesManager(type, state))})\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(NavBar);\n","const Input = ({inputData: {type, field, placeholder, inputsFocus}, inputFn: {formik, setInputsFocus}}) => {\n    return(\n        <>\n            <input\n                noValidate=\"1\"\n                type={type} \n                id={field} \n                name={field} \n                placeholder={placeholder}\n                value={formik.values[field]}\n                className={inputsFocus[field]? \"form-control shadow\": \"form-control\"} \n                onChange={formik.handleChange}\n                onFocus={() => setInputsFocus(inputs => ({...inputs, [field]: true}))}\n                onBlur={(e) => {\n                    formik.handleBlur(e);\n                    setInputsFocus(inputs => ({...inputs, [field]: false}));\n                }}\n            />\n            {formik.touched[field] && formik.errors[field]? \n                <small className=\"text-danger text-right d-block\">{formik.errors[field]}</small>: null\n            }\n        </>\n    )\n}\n\nexport default Input;","import { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { useState } from \"react\";\nimport { useFormik } from 'formik';\nimport { getCurrentUser, login, logout } from \"../services/usersService\";\nimport { indexesManager, LOGIN_INDEX, USER_INDEX } from \"../redux-store/indexes-reduser\";\nimport Input from \"./common/input\";\n\nconst SignIn = ({indexes, indexesManager}) => {\n\n    const[inputsFocus ,setInputsFocus] = useState({});\n    \n    const validate = values => {\n        const errors = {};\n        \n        if(!values.email) errors.email = ' *שדה חובה';\n        else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) errors.email = ' *אימייל לא תקין';\n\n        if(!values.password) errors.password = ' *שדה חובה';\n        else if(values.password.length < 6) errors.password = ' *אורך הסיסמא חייב להיות לפחות שישה תוים';\n        else if(values.password.length > 100) errors.password = ' *אורך הסיסמא לא יכול להיות גדול ממאה תוים';\n\n        return errors;\n    }\n\n    const onSubmit = async values => {\n        const {email, password} = values;\n        try {\n            await login(email, password);\n            indexesManager(USER_INDEX, getCurrentUser().name);\n        } catch(err) { console.dir(err) }\n    }\n\n    const formik = useFormik({\n        initialValues: {\n            email: indexes.signupData.email,\n            password: indexes.signupData.pass\n        },\n        validate,\n        onSubmit\n    });\n\n    const handleSignOut = () => {\n        logout();\n        indexesManager(USER_INDEX, '');\n        indexesManager(LOGIN_INDEX, false);\n    }\n\n    return (\n        <div className=\"login shadow\">\n            {!indexes.user? <div className=\"before-login\">\n                <form id=\"login_form\" className=\"form\" onSubmit={formik.handleSubmit}>\n                    <div className=\"mb-3\">\n                        <Input\n                            inputData={{type: 'email', field: 'email', placeholder: 'כתובת מייל', inputsFocus}}\n                            inputFn={{formik, setInputsFocus}}\n                        />\n                    </div>\n                    <div className=\"mb-3\">\n                        <Input\n                            inputData={{type: 'password', field: 'password', placeholder: 'סיסמא', inputsFocus}}\n                            inputFn={{formik, setInputsFocus}}\n                        />\n                    </div>\n                    <button type=\"submit\" className=\"btn btn-dark btn-block\">התחבר</button>\n                </form>\n                <p className=\"pt-2\"> עדיין לא פתחת חשבון? \n                    <Link \n                        to=\"sign-up\" \n                        className=\"sign-up text-info\" \n                        onClick={() => indexesManager(LOGIN_INDEX, false)}\n                    > הירשם\n                    </Link>\n                </p>\n            </div>:\n            <div className=\"when-login\">\n                <h5>שלום <span className=\"user-name\">{indexes.user}</span></h5>\n                <h6> {'התחברת בהצלחה, קניה מהנה:)'}</h6>\n                <button id=\"log-out\" className=\"btn btn-dark btn-block\" onClick={handleSignOut}>התנתק</button>\n            </div>}\n        </div>\n    )\n}\n\nconst mapStateToProps = ({indexes}) => ({indexes});\nconst mapDispatchToProps = (dispatch) => ({indexesManager: (type, state) => dispatch(indexesManager(type, state))})\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn);","const Pagination = ({pagesCount, currentPage, setCurrentPage}) => {\n    return (\n        <div id=\"pages-container\" className=\"pages-container\">\n            <button \n                id=\"page-prev\" \n                className=\"page-prev btn btn-secondary\"\n                onClick={() => setCurrentPage(currentPage => currentPage - 1)}\n                disabled={currentPage < 1}\n            > הקודם </button>\n            <div className=\"pages-inner-container mx-2\">\n                {pagesCount.map(page => <button\n                    key={page}\n                    className={currentPage === page - 1 ? \"page-btn btn m-1 btn-info\" : \"page-btn btn m-1 btn-outline-info\"} \n                    onClick={() => setCurrentPage(page - 1)}\n                >{page}</button>)}\n            </div>\n            <button \n                id=\"page-next\" \n                className=\"page-next btn btn-secondary\" \n                onClick={() => setCurrentPage(currentPage => currentPage + 1)}\n                disabled={currentPage >= pagesCount.length - 1}\n            > הבא </button>\n        </div>\n    );\n}\n\nexport default Pagination;","import { useState, useEffect } from 'react';\n\nconst useScrollPositionBottom = () => {\n    const [scrollPosition, setScrollPosition] = useState(window.scrollY);\n    const pageHeight   = document.body.clientHeight;\n    const screenHeight = document.documentElement.clientHeight\n\n    useEffect(() => {\n        const handleScroll = () => setScrollPosition(window.scrollY);\n        window.addEventListener('scroll', handleScroll);\n        return () => window.removeEventListener('scroll', handleScroll);\n    }, []);\n\n  return pageHeight - (screenHeight + scrollPosition);\n}\n\nexport default useScrollPositionBottom;\n","import http from \"./http\";\nimport { apiUrl } from \"../config.json\";\n\nexport const getTableData = (table, sortBy, orderBy, skip, limit) => {\n    return http.get(`${apiUrl}/${table}?sort=${sortBy}&order=${orderBy}&skip=${skip}&limit=${limit}`)\n    .then(resp => resp.data)\n}\n\nexport const searchItems = (table, sortBy, orderBy, skip, limit, searchValue) => {\n    return http.get(`${apiUrl}/${table}/search?sort=${sortBy}&order=${orderBy}&skip=${skip}&limit=${limit}&q=${searchValue}`)\n    .then(resp => resp.data);\n}\n\nexport const getSearchCount = (table, searchValue) => http.get(`${apiUrl}/${table}/searchCount?q=${searchValue}`).then(resp => resp.data);\n\nexport const getCount = (table) => http.get(`${apiUrl}/${table}/count`).then(data => typeof data.data === 'number'? data.data : 0);\n\nexport const addItem = (table, item) => http.post(`${apiUrl}/${table}/add`, item);\n\nexport const uploadProdImg = (img, prodId = '') => http.post(`${apiUrl}/prods/addProdImg${prodId ? '?id=' + prodId : ''}`, img);\n\nexport const editItem = (table, itemId, item) => http.put(`${apiUrl}/${table}/edit?id=${itemId}`, item);\n\nexport const deleteItem = (table, itemId) => http.delete(`${apiUrl}/${table}/delete/${itemId}`);\n","import { useFormik } from \"formik\";\nimport { useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { addItem, editItem } from \"../../../services/adminService\";\nimport Input from \"../../common/input\";\n\nconst AddAndEditUser = ({user, fn: {closeForm, reRender}}) => {\n\n    const[inputsFocus, setInputsFocus] = useState({});\n\n    const styles = {\n        formContainer: {width: '100%', height: '100%'},\n        form: {backgroundColor: '#ddd', maxWidth: '700px', maxHeight: '550px', overflowY: 'auto'}\n    }\n\n    const validate = values => {\n        const errors = {};\n\n        if(!values.name) errors.name = ' *שדה חובה';\n        else if(values.name.length < 2) errors.name = ' *אורך השם חייב להיות לפחות שני תוים';\n        else if(values.name.length > 100) errors.name = ' *אורך השם לא יכול להיות גדול ממאה תוים';\n\n        if(!values.email) errors.email = ' *שדה חובה';\n        else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) errors.email = ' *אימייל לא תקין';\n\n        if(!values.role) errors.role = ' *שדה חובה';\n        else if(values.role !== 'admin' && values.role !== 'regular') errors.role = '*ערך לא תקין בחר admin או regular'\n\n        if(!user) {\n            if(!values.password) errors.password = ' *שדה חובה';\n            else if(values.password.length < 6) errors.password = ' *אורך הסיסמא חייב להיות לפחות שישה תוים';\n            else if(values.password.length > 100) errors.password = ' *אורך הסיסמא לא יכול להיות גדול ממאה תוים';\n        }\n\n        return errors;\n    }\n\n    const onSubmit = async values => {\n        if(values.password) values.pass = values.password;\n        delete values.password;\n        try {\n            if(!user) await addItem('users', values);\n            else await editItem('users', user._id, values);\n            closeForm(null);\n            reRender(val => !val);\n            toast(`המשתמש ${user ? 'התעדכן' : 'התווסף'} בהצלחה`);\n        } catch(err) { console.dir(err)\n            toast.error('משהו השתבש נסה שנית מאוחר יותר') }\n    }\n\n    const formik = useFormik({\n        initialValues: {\n            name:  user ? user.name : '',\n            email: user ? user.email : '',\n            role:  user ? user.role  : '',\n            password: ''\n        },\n        validate,\n        onSubmit\n    });\n\n    return (\n        <div className=\"user-form-container d-flex justify-content-center align-items-center\" style={styles.formContainer}>\n            <form \n                className=\"form p-4 m-2\" \n                style={styles.form}\n                onSubmit={formik.handleSubmit}\n            >\n                <h4 className=\"text-center text-info\">פרטי המשתמש</h4>\n                <div className=\"row pt-2\">\n                    <div className=\"form-group col-sm-12 col-md-6\">\n                        <label className=\"d-block text-right\" htmlFor=\"name\">שם משתמש:</label>\n                        <Input\n                            inputData={{type: 'text', field: 'name', placeholder: 'שם משתמש', inputsFocus}}\n                            inputFn={{formik, setInputsFocus}}\n                        />\n                    </div>\n                    <div className=\"form-group col-sm-12 col-md-6\">\n                        <label className=\"d-block text-right\" htmlFor=\"email\">כתובת מייל:</label>\n                        <Input\n                            inputData={{type: 'email', field: 'email', placeholder: 'כתובת מייל', inputsFocus}}\n                            inputFn={{formik, setInputsFocus}}\n                        />\n                    </div>\n                    <div className=\"form-group col-sm-12 col-md-6\">\n                        <label className=\"d-block text-right\" htmlFor=\"password\">סיסמא:</label>\n                        <Input\n                            inputData={{type: 'password', field: 'password', placeholder: 'סיסמא', inputsFocus}}\n                            inputFn={{formik, setInputsFocus}}\n                        />\n                    </div>\n                    <div className=\"form-group col-sm-12 col-md-6\">\n                        <label className=\"d-block text-right\" htmlFor=\"role\">מעמד:</label>\n                        <Input\n                            inputData={{type: 'text', field: 'role', placeholder: 'מעמד', inputsFocus}}\n                            inputFn={{formik, setInputsFocus}}\n                        />\n                    </div>\n                </div>\n                <div className=\"buttons d-flex pt-2\">\n                    <button \n                        type=\"button\" id=\"close_form\" className=\"btn btn-outline-danger m-2 btn-block\"\n                        onClick={() => closeForm(null)}\n                    >סגור</button>\n                    <button type=\"submit\" id=\"submit\" className=\"btn btn-outline-primary m-2 btn-block\">שלח</button>\n                </div>\n            </form>\n        </div>\n    );\n}\n\nexport default AddAndEditUser;","import { getDateFormated } from \"../../../services/generalFn\";\n\nconst UserRow = ({user, fn: {setUserToEdit, handleDeleteUser}, index, page}) => {\n    const {name, email, date_created, role, _id} = user;\n    return(\n        <tr>\n            <td>{(page * 10) + index + 1}</td>\n            <td>{name}</td>\n            <td>{email}</td>\n            <td>{getDateFormated(date_created)}</td>\n            <td>\n                <button className=\"btn btn-outline-info orders\">הזמנות</button>\n            </td>\n            <td>{role}</td>\n            <td>\n                <button className=\"btn btn-outline-primary m-1 edit\" onClick={() => setUserToEdit(user)}>עריכה</button>\n                <button className=\"btn btn-outline-danger delete\" onClick={() => handleDeleteUser(_id)}>מחיקה</button>\n            </td>\n        </tr>\n    );\n}\n\nexport default UserRow;","import useScrollPositionBottom from \"../../../hooks/scrollPosition\";\nimport AddAndEditUser from \"./addAndEditUser\";\nimport UserRow from \"./userRow\";\n\nconst UsersTable = ({\n    tableData: users, currentPage, addItemIndex, itemToEdit: userToEdit, \n    fn: {reRender, handleDeleteItem, handleCloseForm, setAddItemIndex, setItemToEdit}\n}) => {\n\n    const scrollPositionBottom = useScrollPositionBottom();\n    \n    const styles = { \n        addBtn: {bottom: scrollPositionBottom > 115 ? 20 : 115 - scrollPositionBottom} \n    };\n    \n    return(\n        <>\n            <table className=\"table table-striped\">\n                <thead className=\"thead-dark\">\n                    <tr>\n                        <th>#</th>\n                        <th>שם משתמש</th>\n                        <th>אימייל</th>\n                        <th>תאריך כניסה</th>\n                        <th>הזמנות</th>\n                        <th>סיווג</th>\n                        <th>עריכה & מחיקה</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {users.map((user, index) => <UserRow \n                        key={user._id}\n                        user={user} \n                        fn={{setUserToEdit: setItemToEdit, handleDeleteUser: handleDeleteItem}}\n                        index={index}\n                        page={currentPage}\n                    />)}\n                </tbody>\n            </table>\n            <i id=\"add-btn\" className=\"fas fa-plus shadow bg-secondary\" \n                style={styles.addBtn}\n                onClick={() => setAddItemIndex(!addItemIndex)}\n            />\n            {\n            addItemIndex ? \n                <div className=\"dark-form-cover\"  onClick={handleCloseForm}>\n                    <AddAndEditUser fn={{closeForm: setAddItemIndex, reRender}}/>\n                </div>:\n            userToEdit ? \n                <div className=\"dark-form-cover\"  onClick={handleCloseForm}>\n                    <AddAndEditUser user={userToEdit} fn={{closeForm: setItemToEdit, reRender}}/>\n                </div>\n            :''}\n        </>\n    );\n}\n\nexport default UsersTable;","import { NavLink } from \"react-router-dom\";\n\nconst AdminNavBar = ({currentTable, fn: {setSortBy, setOrderBy, showAll, showPages}}) => {\n    return(\n        <div className=\"w-100 admin-nav-container bg-secondary d-flex justify-content-between align-items-center shadow\">\n            <div className=\"p-1 pr-2 float-right justify-content-start align-items-center\" id=\"admin-nav\">\n                <NavLink \n                    to=\"/admin/prods\" \n                    className=\"nav-link d-inline-block\" \n                    style={{'color': currentTable === 'prods' && 'white'}}\n                >מוצרים</NavLink>\n                <NavLink \n                    to=\"/admin/users\" \n                    className=\"nav-link d-inline-block\"\n                    style={{'color': currentTable === 'users' && 'white'}}\n                >משתמשים</NavLink>\n                <span className=\"nav-link d-inline-block\">הזמנות</span>\n            </div>\n            <div className=\"sort-select ml-4 mr-2\">\n                <select onChange={({target: {value}}) => value === '0'? showAll() : showPages(value)}>\n                    <option value=\"10\">חלק לעמודים</option>\n                    <option value=\"0\">הצג הכל</option>\n                </select>\n                <select onChange={({target: {value}}) => setSortBy(value)} id=\"sortBy\" className=\"mx-3\">\n                    <option value=\"_id\">מיין לפי</option>\n                    <option value=\"name\">שם</option>\n                    <option value=\"date_created\">תאריך</option>\n                    {currentTable === 'prods' && <option value=\"price\">מחיר</option>}\n                    {currentTable === 'users' && <option value=\"email\">אימייל</option>}\n                </select>\n                <select onChange={({target: {value}}) => setOrderBy(value)} id=\"orderBy\">\n                    <option value=\"1\">סדר עולה</option>\n                    <option value=\"-1\">סדר יורד</option>\n                </select>\n            </div>\n        </div>\n    )\n}\n\nexport default AdminNavBar;","import { useState, useEffect } from 'react';\n\nconst getWindowSize = () => {\n  const { innerWidth: width, innerHeight: height } = window;\n  return { width, height };\n}\n\nconst useWindowSize = () => {\n  const [windowSize, setWindowSize] = useState(getWindowSize());\n\n  useEffect(() => {\n    const handleResize = () => setWindowSize(getWindowSize());\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return windowSize;\n}\n\nexport default useWindowSize;\n","import useWindowSize from \"../../../hooks/screenSize\";\nimport { getDateFormated } from \"../../../services/generalFn\";\n\nconst ProductRow = ({ prod, fn: {handleDeleteProd, setProdToEdit}, index, page }) => {\n    const {name, price, description, more_info, image, date_created, _id} = prod;\n    const { width } = useWindowSize();\n    const divStyle = {height: width < 1029 ? '80px' : '50px'};\n    return(\n        <tr>\n            <td>{(page * 10) + index + 1}</td>\n            <td className=\"text-success\">{name}</td>\n            <td><div style={divStyle}>{description}</div></td>\n            <td><div className=\"text-left\" style={divStyle}><small>{more_info}</small></div></td>\n            <td className=\"text-success\">{price.toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1,\")} ₪</td>\n            <td><img src={image} alt=\"\"/></td>\n            <td>{getDateFormated(date_created)}</td>\n            <td>\n                <button className=\"btn btn-outline-primary edit m-1\" onClick={() => setProdToEdit(prod)}>עריכה</button>\n                <button className=\"btn btn-outline-danger delete\" onClick={() => handleDeleteProd(_id)}>מחיקה</button>\n            </td>\n        </tr>\n    );\n}\n\nexport default ProductRow;","import { useFormik } from \"formik\";\nimport { useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { addItem, editItem, uploadProdImg } from \"../../../services/adminService\";\nimport Input from \"../../common/input\";\n\nconst AddAndEditProd = ({prod, fn: {closeForm, reRender}}) => {\n\n    const[prodImg, setProdImg] = useState(prod ? prod.image : '')\n    const[inputsFocus, setInputsFocus] = useState({});\n\n    const styles = {\n        formContainer: {width: '100%', height: '100%'},\n        form: {backgroundColor: '#ddd', maxWidth: '700px', maxHeight: '550px', overflowY: 'auto'},\n        textarea: {height: '90%'},\n        image: {\n            backgroundImage: `url('${prodImg}')`,\n            backgroundSize: 'contain', \n            backgroundPosition: 'center',\n            backgroundRepeat: 'no-repeat',\n            minHeight: '150px', transform: 'scale(0.9)'\n        }\n    }\n\n    const validate = values => {\n        const errors = {};\n\n        if(!values.name) errors.name = ' *שדה חובה';\n        else if(values.name.length < 2) errors.name = ' *אורך השם חייב להיות לפחות שני תוים';\n        else if(values.name.length > 100) errors.name = ' *אורך השם לא יכול להיות גדול ממאה תוים';\n\n        if(!values.description) errors.description = ' *שדה חובה';\n        else if(values.description.length < 6) errors.description = ' *אורך התיאור חייב להיות לפחות שישה תוים';\n        else if(values.description.length > 1000) errors.description = ' *אורך התיאור לא יכול להיות גדול מאלף תוים';\n\n        if(!values.price) errors.price = ' *שדה חובה';\n        else if(values.price < 10) errors.price = ' * המחיר חייב להיות לפחות שני ספרות';\n        else if(values.price > 9999) errors.price = ' *המחיר לא יכול להיות יותר מארבע ספרות';\n\n        if(!values.more_info) errors.more_info = ' *שדה חובה';\n        else if(values.more_info.length < 6) errors.more_info = ' *אורך האינפורמציה חייב להיות לפחות שישה תוים';\n        else if(values.more_info.length > 1000) errors.more_info = ' *אורך האינפורמציה לא יכול להיות גדול מאלף תוים';\n\n        return errors;\n    }\n\n    const onSubmit = async values => {\n        let imgUrl = await uploadImage();\n        if(!imgUrl) return;\n        values.image = imgUrl;\n        try {\n            if(!prod) await addItem('prods', values);\n            else await editItem('prods', prod._id, values);\n            closeForm(null);\n            reRender(val => !val);\n            toast(`הפריט ${prod ? 'התעדכן' : 'התווסף'} בהצלחה`);\n        } catch(err) { toast.error('משהו השתבש נסה שנית מאוחר יותר') }\n    }\n\n    const formik = useFormik({\n        initialValues: {\n            name:        prod ? prod.name : '',\n            description: prod ? prod.description : '',\n            price:       prod ? prod.price : '',\n            more_info:   prod ? prod.more_info : '',\n            image:       ''\n        },\n        validate,\n        onSubmit\n    });\n\n\n    const uploadImage = async () => {\n        let image = document.querySelector('#image').files[0];\n\n        if(!image && !prod) return toast.error('לא ניתן להוסיף מוצר ללא תמונה') && null;\n        else if(!image && prod) return prod.image;\n\n        let body  = new FormData();\n        body.append('myImg', image);\n\n        try {\n            let {data: {imgUrl}} = await uploadProdImg(body, prod ? prod._id : '');\n            return imgUrl;\n        } catch(err) { \n            toast.error('אירעה שגיאה בהעלאת התמונה נסה שנית מאוחר יותר');\n            console.dir(err)\n            return prod ? prod.image : null \n        }\n    }\n\n    const displayNewImage = (input) => {\n        if(!input.value) return;\n        let fileReader = new FileReader();\n        fileReader.onload = (e) => setProdImg(e.target.result);\n        fileReader.readAsDataURL(input.files[0]);\n    }\n\n    return (\n        <div className=\"prod-form-container d-flex justify-content-center align-items-center\" style={styles.formContainer}>\n            <form \n                className=\"form p-4 m-2\" \n                style={styles.form}\n                onSubmit={formik.handleSubmit}\n            >\n                <h4 className=\"text-center text-info\">פרטי המוצר</h4>\n                <div className=\"row pt-2\">\n                    <div className=\"form-group col-sm-12 col-md-6\">\n                        <label className=\"d-block text-right\" htmlFor=\"name\">שם מוצר:</label>\n                        <Input\n                            inputData={{type: 'text', field: 'name', placeholder: 'שם מוצר', inputsFocus}}\n                            inputFn={{formik, setInputsFocus}}\n                        />\n                    </div>\n                    <div className=\"form-group col-sm-12 col-md-6\">\n                        <label className=\"d-block text-right\" htmlFor=\"description\">תיאור:</label>\n                        <Input\n                            inputData={{type: 'text', field: 'description', placeholder: 'תיאור', inputsFocus}}\n                            inputFn={{formik, setInputsFocus}}\n                        />\n                    </div>\n                    <div className=\"form-group col-sm-12 col-md-6\">\n                        <label className=\"d-block text-right\" htmlFor=\"price\">מחיר:</label>\n                        <Input\n                            inputData={{type: 'number', field: 'price', placeholder: 'מחיר', inputsFocus}}\n                            inputFn={{formik, setInputsFocus}}\n                        />\n                    </div>\n                    <div className=\"form-group col-sm-12 col-md-6\">\n                        <label className=\"d-block text-right\" htmlFor=\"image\">תמונה:</label>\n                        <div className=\"custom-file\">\n                            <input\n                                type=\"file\" id=\"image\" name=\"image\"\n                                className={inputsFocus.image? \"shadow custom-file-input\": \"custom-file-input\"} \n                                onChange={({target}) => displayNewImage(target)}\n                                onFocus={() => setInputsFocus(inputs => ({...inputs, image: true}))}\n                                onBlur={() => setInputsFocus(inputs => ({...inputs, image: false}))}\n                            />\n                            <label for=\"image\" class=\"custom-file-label\">בחר תמונה</label>\n                        </div>\n                    </div>\n                    <div className=\"d-md-none col-12\" style={styles.image}></div>\n\n                    <div className=\"form-group col-sm-12 col-md-6\" style={{minHeight: '150px'}}>\n                        <label className=\"d-block text-right\" htmlFor=\"more_info\">מידע נוסף:</label>\n                        <textarea \n                            type=\"text\" className=\"form-control\" name=\"more_info\" id=\"more_info\" placeholder=\"מידע נוסף\"\n                            style={styles.textarea}\n                            value={formik.values.more_info}\n                            onChange={formik.handleChange}\n                            onFocus={() => setInputsFocus(inputs => ({...inputs, more_info: true}))}\n                            onBlur={(e) => {\n                                formik.handleBlur(e);\n                                setInputsFocus(inputs => ({...inputs, more_info: false}));\n                            }}\n                        ></textarea>\n                    </div>\n                    <div className=\"d-none d-md-block col-6\" style={styles.image}></div>\n                </div>\n                <div className=\"buttons d-flex pt-2\">\n                    <button \n                        type=\"button\" id=\"close_form\" className=\"btn btn-outline-danger m-2 btn-block\"\n                        onClick={() => closeForm(null)}\n                    >סגור</button>\n                    <button type=\"submit\" id=\"submit\" className=\"btn btn-outline-primary m-2 btn-block\">שלח</button>\n                </div>\n            </form>\n        </div>\n    );\n}\n\nexport default AddAndEditProd;","import ProductRow from \"./productRow\";\nimport AddAndEditProd from \"./addAndEditProd\";\nimport useScrollPositionBottom from \"../../../hooks/scrollPosition\";\n\nconst ProductsTable = ({\n    tableData: products, currentPage, addItemIndex, itemToEdit: prodToEdit, \n    fn: {reRender, handleDeleteItem, handleCloseForm, setAddItemIndex, setItemToEdit}\n}) => {\n\n    const scrollPositionBottom = useScrollPositionBottom();\n\n    const styles = { \n        addBtn: {bottom: scrollPositionBottom > 115 ? 20 : 115 - scrollPositionBottom} \n    };\n    \n    return (\n        <>\n            <table className=\"table table-striped\">\n                <thead className=\"thead-dark\">\n                    <tr>\n                        <th>#</th>\n                        <th>שם מוצר</th>\n                        <th>תיאור</th>\n                        <th>מידע נוסף</th>\n                        <th>מחיר</th>\n                        <th>תמונה</th>\n                        <th>תאריך הוספה</th>\n                        <th>עריכה & מחיקה</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {products.map((prod, index) => <ProductRow \n                        key={prod._id}\n                        prod={prod} \n                        fn={{setProdToEdit: setItemToEdit, handleDeleteProd: handleDeleteItem}} \n                        index={index} \n                        page={currentPage}\n                    />)}\n                </tbody>\n            </table>\n            <i id=\"add-btn\" className=\"fas fa-plus shadow bg-secondary\" \n                style={styles.addBtn}\n                onClick={() => setAddItemIndex(!addItemIndex)}\n            />\n\n            {addItemIndex ? \n                <div className=\"dark-form-cover\" onClick={handleCloseForm}>\n                    <AddAndEditProd fn={{closeForm: setAddItemIndex, reRender}}/>\n                </div>\n            :prodToEdit ? \n                <div className=\"dark-form-cover\" onClick={handleCloseForm}>\n                    <AddAndEditProd prod={prodToEdit} fn={{closeForm: setItemToEdit, reRender}}/>\n                </div>:''\n            }\n        </>\n    )\n}\n\nexport default ProductsTable;","import Pagination from \"./pagination\";\nimport UsersTable from \"./usersTable/usersTable\";\nimport AdminNavBar from \"./adminNavBar\";\nimport ProductsTable from \"./productsTable/productsTable\";\nimport { useState, useEffect } from \"react\";\nimport { deleteItem, getCount, getSearchCount, getTableData, searchItems } from \"../../services/adminService\";\nimport { toast } from \"react-toastify\";\nimport { checkParentsClass } from \"../../services/generalFn\";\n\nconst AdminApp = ({table}) => {\n\n    const[currentTable, setCurrentTable] = useState(table);\n    const[tableData, setTableData] = useState({});\n    const[currentPage, setCurrentPage] = useState(0);\n    const[sortBy, setSortBy] = useState('_id');\n    const[orderBy, setOrderBy] = useState(1);\n    const[itemsCount, setItemsCount] = useState(0);\n    const[pagesCount, setPagesCount] = useState([]);\n    const[amontToShow ,setAmontToShow] = useState(10);\n    const[reRender ,setReRender] = useState(false);\n    const[searchValue, setSearchValue] = useState('');\n    const[loading, setLoading] = useState(false);\n    const[showAllIndex, setShowAllIndex] = useState(false);\n    const[addItemIndex, setAddItemIndex] = useState(false);\n    const[itemToEdit, setItemToEdit] = useState(null);\n\n    useEffect(() => {\n        let data, count, pages = [];\n        (async () => {\n            setLoading(true);\n            if(!searchValue) {\n                data  = await getTableData(currentTable, sortBy, orderBy, currentPage * 10, amontToShow);\n                count = await getCount(currentTable);\n            } else {\n                data  = await searchItems(currentTable, sortBy, orderBy, currentPage * 10, amontToShow, searchValue);\n                count = await getSearchCount(currentTable, searchValue);\n            }\n            setLoading(false);\n            showAllIndex && setAmontToShow(count);\n            let pagesCount = !showAllIndex ? Math.ceil(count / amontToShow): 1;\n            for(let i = 1; i <= pagesCount; i++) pages.push(i);\n            setTableData({[currentTable]: data});\n            setItemsCount(count);\n            setPagesCount(pages);\n        })();\n    }, [currentTable, sortBy, orderBy, currentPage, amontToShow, showAllIndex, reRender, searchValue]);\n\n    useEffect(() => {\n        setCurrentTable(table);\n        setCurrentPage(0);\n    }, [table]);\n\n    useEffect(() => setCurrentPage(0), [searchValue]);\n\n    const showAll = () => {\n        setPagesCount([]);\n        setCurrentPage(0);\n        setShowAllIndex(index => !index);\n        setAmontToShow(itemsCount);\n    }\n\n    const showPages = (value) => {\n        setShowAllIndex(index => !index);\n        setAmontToShow(value);\n    }\n\n    const handleDeleteItem = async (itemId) => {\n        let item = currentTable === 'uaers' ? 'משתמש' : 'מוצר';\n        if(!window.confirm(`האם אתה בטוח שאתה רוצה למחוק את ה${item}?`)) return;\n        try {\n            await deleteItem(currentTable, itemId);\n            reRender(val => !val);\n            toast(`ה${item} נמחק בהצלחה`);\n        } catch(err) { toast.error('משהו השתבש נסה שוב מאוחר יותר') };\n    }\n\n    const handleCloseForm = ({target: element}) => {\n        if(checkParentsClass(element, 'form')) return;\n        if(addItemIndex) setAddItemIndex(false);\n        else if(itemToEdit) setItemToEdit(null);\n    }\n\n    return (\n        <div style={{paddingBottom: '125px'}}>\n            <AdminNavBar\n                fn={{setSortBy, setOrderBy, showAll, showPages}}\n                currentTable={currentTable}\n            />\n\n            <div className=\"admin-tables-head d-flex justify-content-between\">\n                <h6 className=\"pages-text text-right\">\n                    עמוד <span className=\"text-info\">{currentPage + 1}</span> {' '}\n                    מתוך <span className=\"text-info\">{pagesCount.length}</span>\n                </h6>\n                <form className=\"form-inline d-flex justify-content-center md-form form-sm active-pink active-pink-2 mt-5 search-admin\">\n                    <i className=\"fas fa-search mb-3\" aria-hidden=\"true\"></i>\n                    <input id=\"search\" className=\"form-control form-control-sm ml-3 w-75\" type=\"text\" placeholder=\"חפש\"\n                        aria-label=\"Search\" onChange={({target: {value}}) => setSearchValue(value)}/>\n                </form>\n            </div>\n\n            <div className=\"table-container\">\n                {currentTable === 'prods' && tableData[currentTable] ? <ProductsTable \n                    tableData={tableData[currentTable]} \n                    currentPage={currentPage}\n                    itemToEdit={itemToEdit}\n                    addItemIndex={addItemIndex}\n                    fn={{reRender: setReRender, handleDeleteItem, handleCloseForm, setAddItemIndex, setItemToEdit}}\n                />: \n                currentTable === 'users' && tableData[currentTable] ? <UsersTable\n                    tableData={tableData[currentTable]} \n                    currentPage={currentPage}\n                    itemToEdit={itemToEdit}\n                    addItemIndex={addItemIndex}\n                    fn={{reRender: setReRender, handleDeleteItem, handleCloseForm, setAddItemIndex, setItemToEdit}}\n                />: ''}\n            </div>\n\n            {pagesCount.length > 1 && <Pagination \n                pagesCount={pagesCount} \n                currentPage={currentPage} \n                setCurrentPage={setCurrentPage} \n            />}\n            {loading && \n                <div id=\"loading\" className=\"d-flex align-items-center justify-content-center\">\n                    <i className=\"fas fa-spinner fa-spin m-3\" ></i>\n                    <h2>טוען...</h2>\n                </div>\n            }\n        </div>\n    );\n}\n\nexport default AdminApp;","const Product = ({prod: {name, description, price, _id}, fn: {showProd, handleAddToCart}}) => {\n    return (\n        <div className=\"col-lg-6 p-2\">\n            <div className=\"border shadow\">\n                <div className=\"img-container w-50 h-100 float-right\"\n                    style={{background: \"url(../images/Vitamin.jpeg)no-repet center\"}}\n                    prodid={name}\n                    onClick={showProd}></div>\n                <h3 className=\"mt-4 text-center text-info\">{name}</h3>\n                <h5 className=\"mt-2 text-center text-success\">{description}</h5>\n                <h5 className=\"mt-2 text-center text-info\">{price.toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1,\")} ₪</h5>\n                <i className=\"fas fa-cart-plus add-to-cart\" onClick={() => handleAddToCart(_id, price)}></i>\n            </div>\n        </div>\n    );\n}\n\nexport default Product;","import { useState, useEffect } from \"react\"\nimport store from \"../../redux-store/redux-store\";\nimport { connect } from \"react-redux\";\nimport ProdDetails from \"./prodDetails\";\nimport Product from \"./product\"\nimport { ADD_TO_CART, CHANGE_AMOUNT, editCart } from \"../../redux-store/cart-reducer\";\nimport { toast } from \"react-toastify\";\n\nconst Products = ({prods, cart, editCart}) => {\n\n    const [prod, setProd] = useState(null);\n    const [products, setProducts] = useState(prods);\n    const [filteredData, setFilteredData] = useState([]);\n    const [searchValue, setSearchValue] = useState('');\n\n    useEffect(() => {\n        let subscription = store.subscribe(() => setProducts(store.getState().products.prods));\n        return subscription;\n    }, []);\n    \n    useEffect(() => search(), [searchValue]);\n    useEffect(() => setFilteredData(products), [products]);\n\n    const handleAddToCart = async (prod_id, price, amount = 1) => {\n        let isProdInCart = cart.items[cart.items.findIndex(item => item.prod_id === prod_id)];\n        if(isProdInCart) {\n            let { prod_id, payment} = isProdInCart;\n            let prod = {prod_id, amount: isProdInCart.amount, payment};\n            prod.amount += amount;\n            prod.payment = price * isProdInCart.amount;\n            await editCart(CHANGE_AMOUNT, prod);\n            toastMessages('התעדכן');\n        } else {\n            let prod = { prod_id, amount, payment: price * amount};\n            await editCart(ADD_TO_CART, prod);\n            toastMessages('התווסף');\n        }\n    }\n\n    const toastMessages = (msg) => {\n        let error = store.getState().cart.error;\n        if(!error) toast(`הפריט ${msg} בהצלחה`);\n        else toast.error('משהו השתבש נסה שוב מאוחר יותר');\n    }\n\n    const hideProd = () => setProd(null);\n\n    const showProd = ({target:{attributes: {prodid: {nodeValue: prodId}}}}) => {\n        let prod = products.filter(prod => prod.name === prodId);\n        setProd(...prod);\n    }\n\n    const search = () => setFilteredData(products.filter(prod => (\n        prod.name.toLowerCase().includes(searchValue.toLowerCase()) || \n        prod.description.toLowerCase().includes(searchValue.toLowerCase()))));\n\n    return (\n        <div className=\"container products-container mt-5\">\n            <form id=\"form\" className=\"form-inline d-flex justify-content-center md-form form-sm active-pink active-pink-2 mt-2\">\n                <i id=\"form_btn\" className=\"fas fa-search mb-3\" aria-hidden=\"true\"></i>\n                <input id=\"search\" className=\"form-control form-control-sm ml-3 w-75\" type=\"text\" placeholder=\"חפש\"\n                    aria-label=\"Search\" onChange={({target: {value}}) => setSearchValue(value)}/>\n            </form>\n            <div id=\"parent\" className=\"row\">\n                {(filteredData.length)? filteredData.map((prod) => <Product key={prod._id} prod={prod} fn={{showProd, handleAddToCart}}/>):searchValue.length? <div className=\"jumbotron w-100 p-5 m-md-5 mt-5 text-center text-secondary shadow\">\n                    <h4>{'לא נמצאו מוצרים התואמים למילות החיפוש שלך :('}</h4>\n                </div>\n                :''}\n            </div>\n            {prod &&\n                <div className=\"dark justify-content-center align-items-center\">\n                    <ProdDetails prod={prod} fn={{hideProd, handleAddToCart}}/>\n                </div>\n            }\n        </div>\n    )\n}\n\nconst mapStateToProps = (state) => ({prods: state.products.prods, cart: state.cart.cart});\nconst mapDispatchToProps = (dispatch) => ({editCart: (type, prod) => dispatch(editCart(type, prod))})\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(Products);","import * as cartReducer from './cart-reducer';\nimport * as prodsReducer from './products-reducer';\nimport * as indexesReducer from './indexes-reduser';\nimport store from './redux-store';\n\nconst reduxIndex = {\n    ...cartReducer,\n    ...prodsReducer,\n    ...indexesReducer,\n    store\n}\n\nexport default reduxIndex;","import { Redirect, Route } from 'react-router-dom';\nimport {checkAdminToken, checkIfAdmin} from '../services/usersService';\n\nconst ProtectedRoute = ({component: Componenet, table}) => {\n    checkAdminToken();\n    return <Route render={(props) => {\n        if(!checkIfAdmin()) return <Redirect to={{pathname: \"/\", state: {from: props.location}}}/>\n        else return <Componenet {...props} table={table}/>\n    }}/>\n}\n\nexport default ProtectedRoute;","import Input from './common/input';\nimport { toast } from 'react-toastify';\nimport { connect } from \"react-redux\";\nimport { useState } from 'react';\nimport { useFormik } from 'formik';\nimport { useHistory } from 'react-router-dom';\nimport { userSignUp } from '../services/usersService';\nimport { createCart } from '../services/cartService';\nimport { indexesManager, LOGIN_INDEX, SIGNUP_DATA } from '../redux-store/indexes-reduser';\n\nconst SignUp = ({indexesManager}) => {\n\n    const[inputsFocus ,setInputsFocus] = useState({});\n\n    const history = useHistory();\n\n    const validate = values => {\n        const errors = {};\n\n        if(!values.name) errors.name = ' *שדה חובה';\n        else if(values.name.length < 2) errors.name = ' *אורך השם חייב להיות לפחות שני תוים';\n        else if(values.name.length > 100) errors.name = ' *אורך השם לא יכול להיות גדול ממאה תוים';\n\n        if(!values.email) errors.email = ' *שדה חובה';\n        else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) errors.email = ' *אימייל לא תקין';\n\n        if(!values.password) errors.password = ' *שדה חובה';\n        else if(values.password.length < 6) errors.password = ' *אורך הסיסמא חייב להיות לפחות שישה תוים';\n        else if(values.password.length > 100) errors.password = ' *אורך הסיסמא לא יכול להיות גדול ממאה תוים';\n\n        if(!values.verifyPass) errors.verifyPass = ' *שדה חובה';\n        else if(values.verifyPass !== values.password) errors.verifyPass = ' *הסיסמא אינה תואמת לסיסמא שהזנת';\n        \n        return errors;\n    }\n\n    const onSubmit = async values => {\n        let user = { name: values.name, email: values.email, pass: values.password };\n        try {\n            let userInfo = await userSignUp(user);\n            await createCart(userInfo._id);\n\n            toast(`${user.name} ברוך בואך לאתר ויטמינים`);\n            history.replace('home');\n            \n            indexesManager(SIGNUP_DATA, user);\n            indexesManager(LOGIN_INDEX, true);\n        } catch(err) { console.dir(err) }\n    }\n\n    const formik = useFormik({\n        initialValues: {\n            name: '',\n            email: '',\n            password: '',\n            verifyPass: ''\n        },\n        validate,\n        onSubmit\n    });\n\n    return(\n        <div className=\"container py-5\">\n            <form className=\"form sign-up-form py-5 mx-md-5 px-xl-5\" onSubmit={formik.handleSubmit}>\n                <label className=\"pr-1 mt-2 text-right d-block\" htmlFor=\"name\">שם משתמש</label>\n                <Input\n                    inputData={{type: 'text', field: 'name', placeholder: 'שם משתמש', inputsFocus}}\n                    inputFn={{formik, setInputsFocus}}\n                />\n                <label className=\"pr-1 mt-2 text-right d-block\" htmlFor=\"email\">כתובת מייל</label>\n                <Input\n                    inputData={{type: 'email', field: 'email', placeholder: 'כתובת מייל', inputsFocus}}\n                    inputFn={{formik, setInputsFocus}}\n                />\n                <label className=\"pr-1 mt-2 text-right d-block\" htmlFor=\"password\">סיסמא</label>\n                <Input\n                    inputData={{type: 'password', field: 'password', placeholder: 'סיסמא', inputsFocus}}\n                    inputFn={{formik, setInputsFocus}}\n                />\n                <label className=\"pr-1 mt-2 text-right d-block\" htmlFor=\"verifyPass\">אימות סיסמא</label>\n                <Input\n                    inputData={{type: 'password', field: 'verifyPass', placeholder: 'אימות סיסמא', inputsFocus}}\n                    inputFn={{formik, setInputsFocus}}\n                />\n                <button type=\"submit\" className=\"btn btn-dark btn-block my-5\">הירשם</button>\n            </form>\n        </div>\n    );\n}\n\nconst mapStateToProps = ({indexes}) => ({indexes});\nconst mapDispatchToProps = (dispatch) => ({indexesManager: (type, state) => dispatch(indexesManager(type, state))})\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(SignUp);","import './App.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Home from './components/Home';\nimport Cart from './components/cart/cart';\nimport Footer from './components/footer';\nimport NavBar from './components/navBar';\nimport SignIn from './components/signin';\nimport AdminApp from './components/admin/adminApp';\nimport Products from './components/products/products';\nimport reduxIndex from './redux-store/index.redux';\nimport { Provider } from \"react-redux\";\nimport ProtectedRoute from './components/protectedRoute';\nimport { ToastContainer } from 'react-toastify';\nimport { checkParentsClass } from './services/generalFn';\nimport { useState, useEffect } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { checkIfAdmin, getCurrentUser } from './services/usersService';\nimport SignUp from './components/signup';\n\nconst { getProducts, getCart, indexesManager, store, CART_INDEX, LOGIN_INDEX, USER_INDEX, ADMIN_INDEX } = reduxIndex;\n\nfunction App() {\n\n  const [indexes, setIndexes] = useState({});\n  \n  useEffect(() => {\n    (async () => {\n      await store.dispatch(getProducts());\n      getCurrentUser() && await store.dispatch(getCart());\n    })();\n    getCurrentUser() && store.dispatch(indexesManager(USER_INDEX, getCurrentUser().name));\n    store.dispatch(indexesManager(ADMIN_INDEX, checkIfAdmin()));\n    const subscription = store.subscribe(() => setIndexes(store.getState().indexes));\n    return subscription;\n  }, []);\n\n  const pageNotFound = <div className=\"m-3 m-md-5 mt-5 pt-5\">\n    <div className=\"jumbotron p-5 m-md-5 mt-5 text-center text-danger shadow\"><h3>Page Not Found - 404 Error</h3></div>\n  </div>;\n\n  const hideCartAndLogin = ({target: element}) => {\n    if(indexes.cart) {\n      if(!['cart', 'add-to-cart', 'dark', 'img-container'].filter(className => checkParentsClass(element, className)).length)\n        store.dispatch(indexesManager(CART_INDEX, false));\n    } else if(indexes.login) {\n      if(!['connect', 'login'].filter(className => checkParentsClass(element, className)).length)\n        store.dispatch(indexesManager(LOGIN_INDEX, false));\n    } else return;\n  }\n\n  return (\n    <div className=\"App\" onClick={hideCartAndLogin} style={{minHeight: '100vh', position: 'relative'}}>\n      <ToastContainer/>\n      <Provider store={store}>\n        <header><NavBar/></header>\n        {indexes.cart && <Cart/>}\n        {indexes.login && <SignIn/>}\n        <Switch>\n          <Route path=\"/home\" exact component={Home}/>\n          <Route path=\"/products\" exact component={Products}/>\n          <Route path=\"/sign-up\" exact component={SignUp}/>\n          <Route path=\"/page-not-found\" render={() => pageNotFound}/>\n          <ProtectedRoute path=\"/admin/prods\" exact component={AdminApp} table={'prods'}></ProtectedRoute>\n          <ProtectedRoute path=\"/admin/users\" exact component={AdminApp} table={'users'}></ProtectedRoute>\n          <Route path=\"/admin\" exact><Redirect to=\"/admin/prods\"/></Route>\n          <Route path=\"/\" exact><Redirect to=\"/home\"/></Route>\n          <Redirect to=\"/page-not-found\"/>\n        </Switch>\n        <Footer/>\n      </Provider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\nimport \"jquery/dist/jquery\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"@fortawesome/fontawesome-free/css/all.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}